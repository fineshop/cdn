import{registerVersion as e,_registerComponent as t,_getProvider as n,getApp as i}from"./firebase-app.min.js";class o extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,o.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,a.prototype.create)}}class a{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){var i,t=t[0]||{},n=this.service+"/"+e,e=this.errors[e],e=e?(i=t,e.replace(r,(e,t)=>{var n=i[t];return null!=n?String(n):`<${t}?>`})):"Error",e=this.serviceName+`: ${e} (${n}).`;return new o(n,e,t)}}const r=/\{\$([^}]+)}/g;function s(e){return e&&e._delegate?e._delegate:e}class c{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}let u,d;const l=new WeakMap,p=new WeakMap,f=new WeakMap,g=new WeakMap,h=new WeakMap;let w={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return p.get(e);if("objectStoreNames"===t)return e.objectStoreNames||f.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return y(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function m(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(d=d||[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey]).includes(n)?function(...e){return n.apply(v(this),e),y(l.get(this))}:function(...e){return y(n.apply(v(this),e))}:function(e,...t){t=n.call(v(this),e,...t);return f.set(t,e.sort?e.sort():[e]),y(t)}}function b(e){return"function"==typeof e?m(e):(e instanceof IDBTransaction&&(r=e,p.has(r)||(t=new Promise((e,t)=>{const n=()=>{r.removeEventListener("complete",i),r.removeEventListener("error",a),r.removeEventListener("abort",a)},i=()=>{e(),n()},a=()=>{t(r.error||new DOMException("AbortError","AbortError")),n()};r.addEventListener("complete",i),r.addEventListener("error",a),r.addEventListener("abort",a)}),p.set(r,t))),n=e,(u=u||[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]).some(e=>n instanceof e)?new Proxy(e,w):e);var r,t,n}function y(e){if(e instanceof IDBRequest){var r=e;const n=new Promise((e,t)=>{const n=()=>{r.removeEventListener("success",i),r.removeEventListener("error",a)},i=()=>{e(y(r.result)),n()},a=()=>{t(r.error),n()};r.addEventListener("success",i),r.addEventListener("error",a)});return n.then(e=>{e instanceof IDBCursor&&l.set(e,r)}).catch(()=>{}),h.set(n,r),n}if(g.has(e))return g.get(e);var t=b(e);return t!==e&&(g.set(e,t),h.set(t,e)),t}const v=e=>h.get(e);function k(e,t,{blocked:n,upgrade:i,blocking:a,terminated:r}={}){const o=indexedDB.open(e,t),s=y(o);return i&&o.addEventListener("upgradeneeded",e=>{i(y(o.result),e.oldVersion,e.newVersion,y(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),s.then(e=>{r&&e.addEventListener("close",()=>r()),a&&e.addEventListener("versionchange",()=>a())}).catch(()=>{}),s}function I(e,{blocked:t}={}){const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",()=>t()),y(n).then(()=>{})}const S=["get","getKey","getAll","getAllKeys","count"],T=["put","add","delete","clear"],D=new Map;function C(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t){if(D.get(t))return D.get(t);const i=t.replace(/FromIndex$/,""),a=t!==i,r=T.includes(i);return i in(a?IDBIndex:IDBObjectStore).prototype&&(r||S.includes(i))?(e=async function(e,...t){e=this.transaction(e,r?"readwrite":"readonly");let n=e.store;return a&&(n=n.index(t.shift())),(await Promise.all([n[i](...t),r&&e.done]))[0]},D.set(t,e),e):void 0}}w=(i=>({...i,get:(e,t,n)=>C(e,t)||i.get(e,t,n),has:(e,t)=>!!C(e,t)||i.has(e,t)}))(w);const j="@firebase/installations",_="0.6.0-20221206221533",E="w:"+_,M=new a("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function O(e){return e instanceof o&&e.code.includes("request-failed")}function P({projectId:e}){return`https://firebaseinstallations.googleapis.com/v1/projects/${e}/installations`}function A(e){return{token:e.token,requestStatus:2,expiresIn:(e=e.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()}}async function x(e,t){t=(await t.json()).error;return M.create("request-failed",{requestName:e,serverCode:t.code,serverMessage:t.message,serverStatus:t.status})}function B({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function N(e,{refreshToken:t}){const n=B(e);return n.append("Authorization","FIS_v2 "+t),n}async function K(e){var t=await e();return 500<=t.status&&t.status<600?e():t}function L(t){return new Promise(e=>{setTimeout(e,t)})}const $=/^[cdef][\w-]{21}$/;function F(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;t=n;var e=btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_").substr(0,22);return $.test(e)?e:""}catch(e){return""}var t}function q(e){return e.appName+"!"+e.appId}const H=new Map;function R(e,t){e=q(e);U(e,t);{!W&&"BroadcastChannel"in self&&((W=new BroadcastChannel("[Firebase] FID Change")).onmessage=e=>{U(e.data.key,e.data.fid)});const n=W;return n&&n.postMessage({key:e,fid:t}),void(0===H.size&&W&&(W.close(),W=null))}}function U(e,t){var n=H.get(e);if(n)for(const e of n)e(t)}let W=null;const V="firebase-installations-store";let G=null;function J(){return G=G||k("firebase-installations-database",1,{upgrade:(e,t)=>{0===t&&e.createObjectStore(V)}})}async function z(e,t){const n=q(e),i=(await J()).transaction(V,"readwrite"),a=i.objectStore(V),r=await a.get(n);return await a.put(t,n),await i.done,r&&r.fid===t.fid||R(e,t.fid),t}async function Y(e){const t=q(e),n=(await J()).transaction(V,"readwrite");await n.objectStore(V).delete(t),await n.done}async function Q(e,t){const n=q(e),i=(await J()).transaction(V,"readwrite"),a=i.objectStore(V),r=await a.get(n),o=t(r);return void 0===o?await a.delete(n):await a.put(o,n),await i.done,!o||r&&r.fid===o.fid||R(e,o.fid),o}async function Z(t){let n;var e=await Q(t.appConfig,e=>{e=te(e||{fid:F(),registrationStatus:0}),e=function(e,t){if(0!==t.registrationStatus)return 1===t.registrationStatus?{installationEntry:t,registrationPromise:X(e)}:{installationEntry:t};if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(M.create("app-offline"))};t={fid:t.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:t,registrationPromise:async function(t,n){try{var e=await async function({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const i=P(e),a=B(e),r=t.getImmediate({optional:!0});if(r){const e=await r.getHeartbeatsHeader();e&&a.append("x-firebase-client",e)}const o={fid:n,authVersion:"FIS_v2",appId:e.appId,sdkVersion:E},s={method:"POST",headers:a,body:JSON.stringify(o)},c=await K(()=>fetch(i,s));if(c.ok){const e=await c.json();return{fid:e.fid||n,registrationStatus:2,refreshToken:e.refreshToken,authToken:A(e.authToken)}}throw await x("Create Installation",c)}(t,n);return z(t.appConfig,e)}catch(e){throw O(e)&&409===e.customData.serverCode?await Y(t.appConfig):await z(t.appConfig,{fid:n.fid,registrationStatus:0}),e}}(e,t)}}(t,e);return n=e.registrationPromise,e.installationEntry});return""===e.fid?{installationEntry:await n}:{installationEntry:e,registrationPromise:n}}async function X(e){let t=await ee(e.appConfig);for(;1===t.registrationStatus;)await L(100),t=await ee(e.appConfig);if(0!==t.registrationStatus)return t;{const{installationEntry:t,registrationPromise:n}=await Z(e);return n||t}}function ee(e){return Q(e,e=>{if(e)return te(e);throw M.create("installation-not-found")})}function te(e){return 1===e.registrationStatus&&e.registrationTime+1e4<Date.now()?{fid:e.fid,registrationStatus:0}:e}async function ne({appConfig:e,heartbeatServiceProvider:t},n){[o,s]=[e,n["fid"]];const i=P(o)+`/${s}/authTokens:generate`,a=N(e,n),r=t.getImmediate({optional:!0});var o,s;if(r){const e=await r.getHeartbeatsHeader();e&&a.append("x-firebase-client",e)}const c={installation:{sdkVersion:E,appId:e.appId}},u={method:"POST",headers:a,body:JSON.stringify(c)},d=await K(()=>fetch(i,u));if(d.ok)return A(await d.json());throw await x("Generate Auth Token",d)}async function ie(a,r=!1){let o;var e=await Q(a.appConfig,e=>{if(!ae(e))throw M.create("not-registered");var t,n,i=e.authToken;if(!(r||2!==i.requestStatus||(t=i,(n=Date.now())<t.creationTime||t.creationTime+t.expiresIn<n+36e5)))return e;if(1===i.requestStatus)return o=async function(e,t){let n=await oe(e.appConfig);for(;1===n.authToken.requestStatus;)await L(100),n=await oe(e.appConfig);var i=n.authToken;return 0===i.requestStatus?ie(e,t):i}(a,r),e;{if(!navigator.onLine)throw M.create("app-offline");t=e,n={requestStatus:1,requestTime:Date.now()};const r=Object.assign(Object.assign({},t),{authToken:n});return o=async function(t,n){try{var e=await ne(t,n),i=Object.assign(Object.assign({},n),{authToken:e});return await z(t.appConfig,i),e}catch(e){throw!O(e)||401!==e.customData.serverCode&&404!==e.customData.serverCode?(i=Object.assign(Object.assign({},n),{authToken:{requestStatus:0}}),await z(t.appConfig,i)):await Y(t.appConfig),e}}(a,r),r}});return o?await o:e.authToken}function oe(e){return Q(e,e=>{if(!ae(e))throw M.create("not-registered");var t=e.authToken;return 1===t.requestStatus&&t.requestTime+1e4<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function ae(e){return void 0!==e&&2===e.registrationStatus}async function re(e,t=!1){var n;return await(!(n=(await Z(e)).registrationPromise)||!await n),(await ie(e,t)).token}function se(e){return M.create("missing-app-config-values",{valueName:e})}const ce=e=>{const t=e.getProvider("app").getImmediate(),i=n(t,"installations").getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:i}=await Z(t);return(i||ie(t)).catch(console.error),n.fid}(i),getToken:e=>re(i,e)}},ue=(t(new c("installations",e=>{e=e.getProvider("app").getImmediate();return{app:e,appConfig:function(e){if(!e||!e.options)throw se("App Configuration");if(!e.name)throw se("App Name");for(const t of["projectId","apiKey","appId"])if(!e.options[t])throw se(t);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(e),heartbeatServiceProvider:n(e,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),t(new c("installations-internal",ce,"PRIVATE")),e(j,_),e(j,_,"esm2017"),"BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4");var de,le;function pe(e){e=new Uint8Array(e);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function fe(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),i=new Uint8Array(n.length);for(let e=0;e<n.length;++e)i[e]=n.charCodeAt(e);return i}!function(e){e[e.DATA_MESSAGE=1]="DATA_MESSAGE",e[e.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"}(de=de||{}),function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"}(le=le||{});const ge="firebase-messaging-store";let he=null;function we(){return he=he||k("firebase-messaging-database",1,{upgrade:(e,t)=>{0===t&&e.createObjectStore(ge)}})}async function me(e){const t=ye(e),n=await we(),i=await n.transaction(ge).objectStore(ge).get(t);if(i)return i;{const t=await async function(o){if("databases"in indexedDB){const o=(await indexedDB.databases()).map(e=>e.name);if(!o.includes("fcm_token_details_db"))return null}let s=null;return(await k("fcm_token_details_db",5,{upgrade:async(e,t,n,i)=>{if(!(t<2)&&e.objectStoreNames.contains("fcm_token_object_Store")){const a=i.objectStore("fcm_token_object_Store"),r=await a.index("fcmSenderId").get(o);if(await a.clear(),r)if(2===t){const o=r;o.auth&&o.p256dh&&o.endpoint&&(s={token:o.fcmToken,createTime:null!=(e=o.createTime)?e:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"==typeof o.vapidKey?o.vapidKey:pe(o.vapidKey)}})}else if(3===t){const o=r;s={token:o.fcmToken,createTime:o.createTime,subscriptionOptions:{auth:pe(o.auth),p256dh:pe(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:pe(o.vapidKey)}}}else if(4===t){const o=r;s={token:o.fcmToken,createTime:o.createTime,subscriptionOptions:{auth:pe(o.auth),p256dh:pe(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:pe(o.vapidKey)}}}}}})).close(),await I("fcm_token_details_db"),await I("fcm_vapid_details_db"),await I("undefined"),function(e){var t;if(e&&e.subscriptionOptions)return{subscriptionOptions:t}=e,"number"==typeof e.createTime&&0<e.createTime&&"string"==typeof e.token&&0<e.token.length&&"string"==typeof t.auth&&0<t.auth.length&&"string"==typeof t.p256dh&&0<t.p256dh.length&&"string"==typeof t.endpoint&&0<t.endpoint.length&&"string"==typeof t.swScope&&0<t.swScope.length&&"string"==typeof t.vapidKey&&0<t.vapidKey.length}(s)?s:null}(e.appConfig.senderId);if(t)return await be(e,t),t}}async function be(e,t){const n=ye(e),i=(await we()).transaction(ge,"readwrite");return await i.objectStore(ge).put(t,n),await i.done,t}function ye({appConfig:e}){return e.appId}const ve=new a("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});async function ke(e,t){var n={method:"DELETE",headers:await Se(e)};try{const i=await fetch(Ie(e.appConfig)+"/"+t,n),a=await i.json();if(a.error){const e=a.error.message;throw ve.create("token-unsubscribe-failed",{errorInfo:e})}}catch(e){throw ve.create("token-unsubscribe-failed",{errorInfo:null==e?void 0:e.toString()})}}function Ie({projectId:e}){return`https://fcmregistrations.googleapis.com/v1/projects/${e}/registrations`}async function Se({appConfig:e,installations:t}){t=await t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":"FIS "+t})}function Te({p256dh:e,auth:t,endpoint:n,vapidKey:i}){const a={web:{endpoint:n,auth:t,p256dh:e}};return i!==ue&&(a.web.applicationPubKey=i),a}async function De(e){a=e.swRegistration,r=e.vapidKey;const t=await(await a.pushManager.getSubscription()||a.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:fe(r)})),n={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:pe(t.getKey("auth")),p256dh:pe(t.getKey("p256dh"))},i=await me(e.firebaseDependencies);var a,r,o,s;if(i){if(a=i.subscriptionOptions,r=n.vapidKey===a.vapidKey,o=n.endpoint===a.endpoint,s=n.auth===a.auth,a=n.p256dh===a.p256dh,r&&o&&s&&a)return Date.now()>=i.createTime+6048e5?async function(e,t){try{var n=await async function(e,t){const n=await Se(e),i=Te(t.subscriptionOptions),a={method:"PATCH",headers:n,body:JSON.stringify(i)};let r;try{const n=await fetch(Ie(e.appConfig)+"/"+t.token,a);r=await n.json()}catch(e){throw ve.create("token-update-failed",{errorInfo:null==e?void 0:e.toString()})}if(r.error){const e=r.error.message;throw ve.create("token-update-failed",{errorInfo:e})}if(r.token)return r.token;throw ve.create("token-update-no-token")}(e.firebaseDependencies,t),i=Object.assign(Object.assign({},t),{token:n,createTime:Date.now()});return await be(e.firebaseDependencies,i),n}catch(t){throw await Ce(e),t}}(e,{token:i.token,createTime:Date.now(),subscriptionOptions:n}):i.token;try{await ke(e.firebaseDependencies,i.token)}catch(e){console.warn(e)}return je(e.firebaseDependencies,n)}return je(e.firebaseDependencies,n)}async function Ce(e){var t=await me(e.firebaseDependencies);if(t){await ke(e.firebaseDependencies,t.token);{const i=ye(t=e.firebaseDependencies),a=(await we()).transaction(ge,"readwrite");await a.objectStore(ge).delete(i),await a.done}await 0}const n=await e.swRegistration.pushManager.getSubscription();return!n||n.unsubscribe()}async function je(e,t){t={token:await async function(e,t){var n=await Se(e),t=Te(t),n={method:"POST",headers:n,body:JSON.stringify(t)};let i;try{const t=await fetch(Ie(e.appConfig),n);i=await t.json()}catch(e){throw ve.create("token-subscribe-failed",{errorInfo:null==e?void 0:e.toString()})}if(i.error){const e=i.error.message;throw ve.create("token-subscribe-failed",{errorInfo:e})}if(i.token)return i.token;throw ve.create("token-subscribe-no-token")}(e,t),createTime:Date.now(),subscriptionOptions:t};return await be(e,t),t.token}async function _e(e,t){t=function(e,t){const n={};return e.from&&(n.project_number=e.from),e.fcmMessageId&&(n.message_id=e.fcmMessageId),n.instance_id=t,e.notification?n.message_type=de.DISPLAY_NOTIFICATION.toString():n.message_type=de.DATA_MESSAGE.toString(),n.sdk_platform=3..toString(),n.package_name=self.origin.replace(/(^\w+:|^)\/\//,""),e.collapse_key&&(n.collapse_key=e.collapse_key),n.event=1..toString(),null!=(t=e.fcmOptions)&&t.analytics_label&&(n.analytics_label=null==(t=e.fcmOptions)?void 0:t.analytics_label),n}(t,await e.firebaseDependencies.installations.getId());{const n={};return n.event_time_ms=Math.floor(Date.now()).toString(),n.source_extension_json_proto3=JSON.stringify(t),void e.logEvents.push(n)}}function Ee(t,n){const i=[];for(let e=0;e<t.length;e++)i.push(t.charAt(e)),e<n.length&&i.push(n.charAt(e));return i.join("")}async function Me(e,t){var n=function({data:e}){if(!e)return null;try{return e.json()}catch(e){return null}}(e);if(n){t.deliveryMetricsExportedToBigQueryEnabled&&await _e(t,n);var i,a,r,o,s,e=await Pe();if(e.some(e=>"visible"===e.visibilityState&&!e.url.startsWith("chrome-extension://"))){var c=n;c.isFirebaseMessaging=!0,c.messageType=le.PUSH_RECEIVED;for(const u of e)u.postMessage(c)}else if(n.notification&&(e=function(e){const t=Object.assign({},e.notification);return t.data={FCM_MSG:e},t}(n),o=e.actions,s=Notification.maxActions,o&&s&&o.length>s&&console.warn(`This browser only supports ${s} actions. The remaining actions will not be displayed.`),await self.registration.showNotification(null!=(o=e.title)?o:"",e)),t&&t.onBackgroundMessageHandler){o={from:(s=n).from,collapseKey:s.collapse_key,messageId:s.fcmMessageId},n=o,(a=s).notification&&(n.notification={},(r=a.notification.title)&&(n.notification.title=r),(r=a.notification.body)&&(n.notification.body=r),(r=a.notification.image)&&(n.notification.image=r),(r=a.notification.icon)&&(n.notification.icon=r)),a=o,s.data&&(a.data=s.data),n=o,((r=s).fcmOptions||null!=(i=r.notification)&&i.click_action)&&(n.fcmOptions={},(i=null!=(i=null==(i=r.fcmOptions)?void 0:i.link)?i:null==(i=r.notification)?void 0:i.click_action)&&(n.fcmOptions.link=i),(r=null==(i=r.fcmOptions)?void 0:i.analytics_label)&&(n.fcmOptions.analyticsLabel=r));const e=o;"function"==typeof t.onBackgroundMessageHandler?await t.onBackgroundMessageHandler(e):t.onBackgroundMessageHandler.next(e)}}}async function Oe(t){const n=null==(i=null==(i=t.notification)?void 0:i.data)?void 0:i.FCM_MSG;if(n&&!t.action){t.stopImmediatePropagation(),t.notification.close();i=n;var i=(t=null!=(t=null==(t=i.fcmOptions)?void 0:t.link)?t:null==(t=i.notification)?void 0:t.click_action)||("object"==typeof(t=i.data)&&t&&"google.c.a.c_id"in t?self.location.origin:null);if(i){var t=new URL(i,self.location.href),e=new URL(self.location.origin);if(t.host===e.host){let e=await async function(e){const t=await Pe();for(const n of t){const t=new URL(n.url,self.location.href);if(e.host===t.host)return n}return null}(t);return e?e=await e.focus():(e=await self.clients.openWindow(i),await new Promise(e=>{setTimeout(e,3e3)})),e?(n.messageType=le.NOTIFICATION_CLICKED,n.isFirebaseMessaging=!0,e.postMessage(n)):void 0}}}}function Pe(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function Ae(e){return ve.create("missing-app-config-values",{valueName:e})}Ee("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ee("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class xe{constructor(e,t,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;var i=function(e){if(!e||!e.options)throw Ae("App Configuration Object");if(!e.name)throw Ae("App Name");var t=e["options"];for(const e of["projectId","apiKey","appId","messagingSenderId"])if(!t[e])throw Ae(e);return{appName:e.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:n}}_delete(){return Promise.resolve()}}async function Be(){return function(){try{return"object"==typeof indexedDB}catch(e){return!1}}()&&await new Promise((t,n)=>{try{let e=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),e||self.indexedDB.deleteDatabase(i),t(!0)},a.onupgradeneeded=()=>{e=!1},a.onerror=()=>{var e;n((null==(e=a.error)?void 0:e.message)||"")}}catch(t){n(t)}})&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function Ne(e=i()){return Be().then(e=>{if(!e)throw ve.create("unsupported-browser")},e=>{throw ve.create("indexed-db-unsupported")}),n(s(e),"messaging-sw").getImmediate()}function Ke(e,t){var n=e=s(e),e=t;if(void 0!==self.document)throw ve.create("only-available-in-sw");return n.onBackgroundMessageHandler=e,()=>{n.onBackgroundMessageHandler=null}}function Le(e,t){(e=s(e)).deliveryMetricsExportedToBigQueryEnabled=t}t(new c("messaging-sw",e=>{const t=new xe(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return self.addEventListener("push",e=>{e.waitUntil(Me(e,t))}),self.addEventListener("pushsubscriptionchange",e=>{e.waitUntil(async function(e,t){var e=e["newSubscription"];e?(e=await me(t.firebaseDependencies),await Ce(t),t.vapidKey=null!=(e=null==(e=null==e?void 0:e.subscriptionOptions)?void 0:e.vapidKey)?e:ue,await De(t)):await Ce(t)}(e,t))}),self.addEventListener("notificationclick",e=>{e.waitUntil(Oe(e))}),t},"PUBLIC"));export{Le as experimentalSetDeliveryMetricsExportedToBigQueryEnabled,Ne as getMessaging,Be as isSupported,Ke as onBackgroundMessage};