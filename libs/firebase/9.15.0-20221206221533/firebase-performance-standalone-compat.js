!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).firebase=t()}(this,function(){"use strict";var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};var p=function(){return(p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function f(e,a,s,c){return new(s=s||Promise)(function(n,t){function r(e){try{o(c.next(e))}catch(e){t(e)}}function i(e){try{o(c.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,i)}o((c=c.apply(e,a||[])).next())})}function h(n,r){var i,o,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=2&t[0]?o.return:t[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,t[1])).done)return a;switch(o=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function d(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function v(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function a(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||((r=r||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}var n=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:(i<2048?t[n++]=i>>6|192:(55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128):t[n++]=i>>12|224,t[n++]=i>>6&63|128),t[n++]=63&i|128)}return t},i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,s=a?e[i+1]:0,c=i+2<e.length,u=c?e[i+2]:0,l=(15&s)<<2|u>>6,u=63&u;c||(u=64,a||(l=64)),r.push(n[o>>2],n[(3&o)<<4|s>>4],n[l],n[u])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(n(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i,o,a,s=e[n++];s<128?t[r++]=String.fromCharCode(s):191<s&&s<224?(o=e[n++],t[r++]=String.fromCharCode((31&s)<<6|63&o)):239<s&&s<365?(i=((7&s)<<18|(63&(o=e[n++]))<<12|(63&(a=e[n++]))<<6|63&e[n++])-65536,t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))):(o=e[n++],a=e[n++],t[r++]=String.fromCharCode((15&s)<<12|(63&o)<<6|63&a))}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,c=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==c)throw Error();r.push(o<<2|a>>4),64!==s&&(r.push(a<<4&240|s>>2),64!==c&&r.push(s<<6&192|c))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},o=function(e){return t=n(e),i.encodeByteArray(t,!0).replace(/\./g,"");var t};function c(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=c(e[n],t[n]));return e}function t(){try{return"object"==typeof indexedDB}catch(e){return}}function s(){return new Promise(function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}})}function e(){return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__}function u(){if("undefined"!=typeof document){try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}var e=e&&function(e){try{return i.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}(e[1]);return e&&JSON.parse(e)}}function l(){try{return e()||function(){if("undefined"!=typeof process&&void 0!==process.env){var e=process.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||u()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}}var g=function(){var e;return null===(e=l())||void 0===e?void 0:e.config},m=(b.prototype.wrapCallback=function(n){var r=this;return function(e,t){e?r.reject(e):r.resolve(t),"function"==typeof n&&(r.promise.catch(function(){}),1===n.length?n(e):n(e,t))}},b);function b(){var n=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,t){n.resolve=e,n.reject=t})}var y,_=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(w,y=Error),w);function w(e,t,n){var r=y.call(this,t)||this;return r.code=e,r.customData=n,r.name="FirebaseError",Object.setPrototypeOf(r,w.prototype),Error.captureStackTrace&&Error.captureStackTrace(r,E.prototype.create),r}var E=(I.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r,i=t[0]||{},o="".concat(this.service,"/").concat(e),a=this.errors[e],a=a?(r=i,a.replace(S,function(e,t){var n=r[t];return null!=n?String(n):"<".concat(t,"?>")})):"Error",a="".concat(this.serviceName,": ").concat(a," (").concat(o,").");return new _(o,a,i)},I);function I(e,t,n){this.service=e,this.serviceName=t,this.errors=n}var S=/\{\$([^}]+)}/g;function T(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function C(e,t){if(e===t)return 1;for(var n=Object.keys(e),r=Object.keys(t),i=0,o=n;i<o.length;i++){var a=o[i];if(!r.includes(a))return;var s=e[a],c=t[a];if(A(s)&&A(c)){if(!C(s,c))return}else if(s!==c)return}for(var u=0,l=r;u<l.length;u++){a=l[u];if(!n.includes(a))return}return 1}function A(e){return null!==e&&"object"==typeof e}function O(e,t){var n=new D(e,t);return n.subscribe.bind(n)}var D=(N.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},N.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},N.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},N.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return!0}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=P),void 0===r.error&&(r.error=P),void 0===r.complete&&(r.complete=P);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}}),this.observers.push(r),o},N.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],--this.observerCount,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},N.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},N.prototype.sendOne=function(e,t){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}})},N.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))},N);function N(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(function(){e(n)}).catch(function(e){n.error(e)})}function P(){}var k=(M.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},M.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},M.prototype.setServiceProps=function(e){return this.serviceProps=e,this},M.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},M);function M(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}var L="[DEFAULT]",B=(R.prototype.get=function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new m;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise},R.prototype.getImmediate=function(e){var t=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),n=null!==(n=null==e?void 0:e.optional)&&void 0!==n&&n;if(!this.isInitialized(t)&&!this.shouldAutoInitialize()){if(n)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:t})}catch(e){if(n)return null;throw e}},R.prototype.getComponent=function(){return this.component},R.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if("EAGER"===e.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:L})}catch(e){}try{for(var r=d(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=v(i.value,2),a=o[0],s=o[1],c=this.normalizeInstanceIdentifier(a);try{var u=this.getOrInitializeService({instanceIdentifier:c});s.resolve(u)}catch(e){}}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}}},R.prototype.clearInstance=function(e){this.instancesDeferred.delete(e=void 0===e?L:e),this.instancesOptions.delete(e),this.instances.delete(e)},R.prototype.delete=function(){return f(this,void 0,void 0,function(){var t;return h(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(a(a([],v(t.filter(function(e){return"INTERNAL"in e}).map(function(e){return e.INTERNAL.delete()})),!1),v(t.filter(function(e){return"_delete"in e}).map(function(e){return e._delete()})),!1))];case 1:return e.sent(),[2]}})})},R.prototype.isComponentSet=function(){return null!=this.component},R.prototype.isInitialized=function(e){return this.instances.has(e=void 0===e?L:e)},R.prototype.getOptions=function(e){return this.instancesOptions.get(e=void 0===e?L:e)||{}},R.prototype.initialize=function(e){var t,n,r=(e=void 0===e?{}:e).options,r=void 0===r?{}:r,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error("".concat(this.name,"(").concat(i,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var o=this.getOrInitializeService({instanceIdentifier:i,options:r});try{for(var a=d(this.instancesDeferred.entries()),s=a.next();!s.done;s=a.next()){var c=v(s.value,2),u=c[0],l=c[1];i===this.normalizeInstanceIdentifier(u)&&l.resolve(o)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return o},R.prototype.onInit=function(e,t){var n=this.normalizeInstanceIdentifier(t),r=null!==(i=this.onInitCallbacks.get(n))&&void 0!==i?i:new Set;r.add(e),this.onInitCallbacks.set(n,r);var i=this.instances.get(n);return i&&e(i,n),function(){r.delete(e)}},R.prototype.invokeOnInitCallbacks=function(e,t){var n,r,i=this.onInitCallbacks.get(t);if(i)try{for(var o=d(i),a=o.next();!a.done;a=o.next()){var s=a.value;try{s(e,t)}catch(e){}}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},R.prototype.getOrInitializeService=function(e){var t=e.instanceIdentifier,n=e.options,r=void 0===n?{}:n,n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(e=t)===L?void 0:e,options:r}),this.instances.set(t,n),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(e){}return n||null},R.prototype.normalizeInstanceIdentifier=function(e){return void 0===e&&(e=L),!this.component||this.component.multipleInstances?e:L},R.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},R);function R(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}var j=(F.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)},F.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},F.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new B(e,this);return this.providers.set(e,t),t},F.prototype.getProviders=function(){return Array.from(this.providers.values())},F);function F(e){this.name=e,this.providers=new Map}var x,U=[];(an=x=x||{})[an.DEBUG=0]="DEBUG",an[an.VERBOSE=1]="VERBOSE",an[an.INFO=2]="INFO",an[an.WARN=3]="WARN",an[an.ERROR=4]="ERROR",an[an.SILENT=5]="SILENT";function H(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(t<e.logLevel)){var i=(new Date).toISOString(),o=W[t];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));console[o].apply(console,a(["[".concat(i,"]  ").concat(e.name,":")],n,!1))}}var z,V={debug:x.DEBUG,verbose:x.VERBOSE,info:x.INFO,warn:x.WARN,error:x.ERROR,silent:x.SILENT},q=x.INFO,W=((tt={})[x.DEBUG]="log",tt[x.VERBOSE]="log",tt[x.INFO]="info",tt[x.WARN]="warn",tt[x.ERROR]="error",tt),$=(Object.defineProperty(K.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in x))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e},enumerable:!1,configurable:!0}),K.prototype.setLogLevel=function(e){this._logLevel="string"==typeof e?V[e]:e},Object.defineProperty(K.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(K.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),K.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,a([this,x.DEBUG],e,!1)),this._logHandler.apply(this,a([this,x.DEBUG],e,!1))},K.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,a([this,x.VERBOSE],e,!1)),this._logHandler.apply(this,a([this,x.VERBOSE],e,!1))},K.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,a([this,x.INFO],e,!1)),this._logHandler.apply(this,a([this,x.INFO],e,!1))},K.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,a([this,x.WARN],e,!1)),this._logHandler.apply(this,a([this,x.WARN],e,!1))},K.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,a([this,x.ERROR],e,!1)),this._logHandler.apply(this,a([this,x.ERROR],e,!1))},K);function K(e){this.name=e,this._logLevel=q,this._logHandler=H,this._userLogHandler=null,U.push(this)}function J(a,t){for(var e=0,n=U;e<n.length;e++)!function(e){var o=null;t&&t.level&&(o=V[t.level]),e.userLogHandler=null===a?null:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.map(function(e){if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}}).filter(function(e){return e}).join(" ");t>=(null!=o?o:e.logLevel)&&a({level:x[t].toLowerCase(),message:i,args:n,type:e.name})}}(n[e])}const G=(t,e)=>e.some(e=>t instanceof e);let Y,X;const Z=new WeakMap,Q=new WeakMap,ee=new WeakMap,te=new WeakMap,ne=new WeakMap;let re={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Q.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ee.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ae(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function ie(r){return r!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(X=X||[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey]).includes(r)?function(...e){return r.apply(se(this),e),ae(Z.get(this))}:function(...e){return ae(r.apply(se(this),e))}:function(e,...t){var n=r.call(se(this),e,...t);return ee.set(n,e.sort?e.sort():[e]),ae(n)}}function oe(e){return"function"==typeof e?ie(e):(e instanceof IDBTransaction&&(o=e,Q.has(o)||(t=new Promise((e,t)=>{const n=()=>{o.removeEventListener("complete",r),o.removeEventListener("error",i),o.removeEventListener("abort",i)},r=()=>{e(),n()},i=()=>{t(o.error||new DOMException("AbortError","AbortError")),n()};o.addEventListener("complete",r),o.addEventListener("error",i),o.addEventListener("abort",i)}),Q.set(o,t))),G(e,Y=Y||[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])?new Proxy(e,re):e);var o,t}function ae(e){if(e instanceof IDBRequest)return function(o){const e=new Promise((e,t)=>{const n=()=>{o.removeEventListener("success",r),o.removeEventListener("error",i)},r=()=>{e(ae(o.result)),n()},i=()=>{t(o.error),n()};o.addEventListener("success",r),o.addEventListener("error",i)});return e.then(e=>{e instanceof IDBCursor&&Z.set(e,o)}).catch(()=>{}),ne.set(e,o),e}(e);if(te.has(e))return te.get(e);var t=oe(e);return t!==e&&(te.set(e,t),ne.set(t,e)),t}const se=e=>ne.get(e);function ce(e,t,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const a=indexedDB.open(e,t),s=ae(a);return r&&a.addEventListener("upgradeneeded",e=>{r(ae(a.result),e.oldVersion,e.newVersion,ae(a.transaction))}),n&&a.addEventListener("blocked",()=>n()),s.then(e=>{o&&e.addEventListener("close",()=>o()),i&&e.addEventListener("versionchange",()=>i())}).catch(()=>{}),s}const ue=["get","getKey","getAll","getAllKeys","count"],le=["put","add","delete","clear"],fe=new Map;function pe(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t){if(fe.get(t))return fe.get(t);const i=t.replace(/FromIndex$/,""),o=t!==i,a=le.includes(i);if(i in(o?IDBIndex:IDBObjectStore).prototype&&(a||ue.includes(i))){var n=async function(e,...t){var n=this.transaction(e,a?"readwrite":"readonly");let r=n.store;return o&&(r=r.index(t.shift())),(await Promise.all([r[i](...t),a&&n.done]))[0]};return fe.set(t,n),n}}}re={...z=re,get:(e,t,n)=>pe(e,t)||z.get(e,t,n),has:(e,t)=>!!pe(e,t)||z.has(e,t)};var he=(de.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(e){if("VERSION"!==(null==(t=e.getComponent())?void 0:t.type))return null;var t,t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}).filter(function(e){return e}).join(" ")},de);function de(e){this.container=e}var ve="@firebase/app",ge="0.9.0-20221206221533",me=new $("@firebase/app"),be="[DEFAULT]",ye=((Ce={})[ve]="fire-core",Ce["@firebase/app-compat"]="fire-core-compat",Ce["@firebase/analytics"]="fire-analytics",Ce["@firebase/analytics-compat"]="fire-analytics-compat",Ce["@firebase/app-check"]="fire-app-check",Ce["@firebase/app-check-compat"]="fire-app-check-compat",Ce["@firebase/auth"]="fire-auth",Ce["@firebase/auth-compat"]="fire-auth-compat",Ce["@firebase/database"]="fire-rtdb",Ce["@firebase/database-compat"]="fire-rtdb-compat",Ce["@firebase/functions"]="fire-fn",Ce["@firebase/functions-compat"]="fire-fn-compat",Ce["@firebase/installations"]="fire-iid",Ce["@firebase/installations-compat"]="fire-iid-compat",Ce["@firebase/messaging"]="fire-fcm",Ce["@firebase/messaging-compat"]="fire-fcm-compat",Ce["@firebase/performance"]="fire-perf",Ce["@firebase/performance-compat"]="fire-perf-compat",Ce["@firebase/remote-config"]="fire-rc",Ce["@firebase/remote-config-compat"]="fire-rc-compat",Ce["@firebase/storage"]="fire-gcs",Ce["@firebase/storage-compat"]="fire-gcs-compat",Ce["@firebase/firestore"]="fire-fst",Ce["@firebase/firestore-compat"]="fire-fst-compat",Ce["fire-js"]="fire-js",Ce.firebase="fire-js-all",Ce),_e=new Map,we=new Map;function Ee(t,n){try{t.container.addComponent(n)}catch(e){me.debug("Component ".concat(n.name," failed to register with FirebaseApp ").concat(t.name),e)}}function Ie(e,t){e.container.addOrOverwriteComponent(t)}function Se(e){var t,n,r=e.name;if(we.has(r))return me.debug("There were multiple attempts to register component ".concat(r,".")),!1;we.set(r,e);try{for(var i=d(_e.values()),o=i.next();!o.done;o=i.next())Ee(o.value,e)}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return!0}function Te(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}var Ce=((tt={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",tt["bad-app-name"]="Illegal App name: '{$appName}",tt["duplicate-app"]="Firebase App named '{$appName}' already exists with different options or config",tt["app-deleted"]="Firebase App named '{$appName}' already deleted",tt["no-options"]="Need to provide options, when not being deployed to hosting via source.",tt["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",tt["invalid-log-argument"]="First argument to `onLog` must be null or a function.",tt["idb-open"]="Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",tt["idb-get"]="Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",tt["idb-set"]="Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",tt["idb-delete"]="Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.",tt),Ae=new E("app","Firebase",Ce),Oe=(Object.defineProperty(De.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(De.prototype,"name",{get:function(){return this.checkDestroyed(),this._name},enumerable:!1,configurable:!0}),Object.defineProperty(De.prototype,"options",{get:function(){return this.checkDestroyed(),this._options},enumerable:!1,configurable:!0}),Object.defineProperty(De.prototype,"config",{get:function(){return this.checkDestroyed(),this._config},enumerable:!1,configurable:!0}),Object.defineProperty(De.prototype,"container",{get:function(){return this._container},enumerable:!1,configurable:!0}),Object.defineProperty(De.prototype,"isDeleted",{get:function(){return this._isDeleted},set:function(e){this._isDeleted=e},enumerable:!1,configurable:!0}),De.prototype.checkDestroyed=function(){if(this.isDeleted)throw Ae.create("app-deleted",{appName:this._name})},De);function De(e,t,n){var r=this;this._isDeleted=!1,this._options=p({},e),this._config=p({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new k("app",function(){return r},"PUBLIC"))}var Ne="9.15.0-20221206221533";function Pe(e,t){var n,r,i=e,o=p({name:be,automaticDataCollectionEnabled:!1},t="object"!=typeof(t=void 0===t?{}:t)?{name:t}:t),a=o.name;if("string"!=typeof a||!a)throw Ae.create("bad-app-name",{appName:String(a)});if(!(i=i||g()))throw Ae.create("no-options");var s=_e.get(a);if(s){if(C(i,s.options)&&C(o,s.config))return s;throw Ae.create("duplicate-app",{appName:a})}var c=new j(a);try{for(var u=d(we.values()),l=u.next();!l.done;l=u.next()){var f=l.value;c.addComponent(f)}}catch(e){n={error:e}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}o=new Oe(i,o,c);return _e.set(a,o),o}function ke(n){return f(this,void 0,void 0,function(){var t;return h(this,function(e){switch(e.label){case 0:return(t=n.name,_e.has(t))?(_e.delete(t),[4,Promise.all(n.container.getProviders().map(function(e){return e.delete()}))]):[3,2];case 1:e.sent(),n.isDeleted=!0,e.label=2;case 2:return[2]}})})}function Me(e,t,n){var r=null!==(a=ye[e])&&void 0!==a?a:e;n&&(r+="-".concat(n));var i=r.match(/\s|\//),o=t.match(/\s|\//);if(i||o){var a=['Unable to register library "'.concat(r,'" with version "').concat(t,'":')];return i&&a.push('library name "'.concat(r,'" contains illegal characters (whitespace or "/")')),i&&o&&a.push("and"),o&&a.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void me.warn(a.join(" "))}Se(new k("".concat(r,"-version"),function(){return{library:r,version:t}},"VERSION"))}function Le(e,t){if(null!==e&&"function"!=typeof e)throw Ae.create("invalid-log-argument");J(e,t)}function Be(e){var t;t=e,U.forEach(function(e){e.setLogLevel(t)})}var Re="firebase-heartbeat-database",je=1,Fe="firebase-heartbeat-store",xe=null;function Ue(){return xe=xe||ce(Re,je,{upgrade:function(e,t){0===t&&e.createObjectStore(Fe)}}).catch(function(e){throw Ae.create("idb-open",{originalErrorMessage:e.message})})}function He(r,i){return f(this,void 0,void 0,function(){var t,n;return h(this,function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),[4,Ue()];case 1:return n=e.sent(),t=n.transaction(Fe,"readwrite"),[4,t.objectStore(Fe).put(i,ze(r))];case 2:return e.sent(),[2,t.done];case 3:return(n=e.sent())instanceof _?me.warn(n.message):(n=Ae.create("idb-set",{originalErrorMessage:null==n?void 0:n.message}),me.warn(n.message)),[3,4];case 4:return[2]}})})}function ze(e){return"".concat(e.name,"!").concat(e.options.appId)}var Ve=(qe.prototype.triggerHeartbeat=function(){return f(this,void 0,void 0,function(){var t,n,r;return h(this,function(e){switch(e.label){case 0:return(t=this.container.getProvider("platform-logger").getImmediate(),t=t.getPlatformInfoString(),n=We(),null!==this._heartbeatsCache)?[3,2]:[4,(r=this)._heartbeatsCachePromise];case 1:r._heartbeatsCache=e.sent(),e.label=2;case 2:return this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(function(e){return e.date===n})?[2]:(this._heartbeatsCache.heartbeats.push({date:n,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),[2,this._storage.overwrite(this._heartbeatsCache)])}})})},qe.prototype.getHeartbeatsHeader=function(){return f(this,void 0,void 0,function(){var t,n,r;return h(this,function(e){switch(e.label){case 0:return null!==this._heartbeatsCache?[3,2]:[4,this._heartbeatsCachePromise];case 1:e.sent(),e.label=2;case 2:return null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length?[2,""]:(t=We(),n=function(e,n){var t,r;void 0===n&&(n=1024);var i=[],o=e.slice();try{for(var a=d(e),s=a.next();!s.done;s=a.next())if("break"===function(t){var e=i.find(function(e){return e.agent===t.agent});if(e){if(e.dates.push(t.date),Ge(i)>n)return e.dates.pop(),"break"}else if(i.push({agent:t.agent,dates:[t.date]}),Ge(i)>n)return i.pop(),"break";o=o.slice(1)}(s.value))break}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return{heartbeatsToSend:i,unsentEntries:o}}(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,n=n.unsentEntries,r=o(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,0<n.length?(this._heartbeatsCache.heartbeats=n,[4,this._storage.overwrite(this._heartbeatsCache)]):[3,4]);case 3:return e.sent(),[3,5];case 4:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache),e.label=5;case 5:return[2,r]}})})},qe);function qe(e){var t=this;this.container=e,this._heartbeatsCache=null;var n=this.container.getProvider("app").getImmediate();this._storage=new Ke(n),this._heartbeatsCachePromise=this._storage.read().then(function(e){return t._heartbeatsCache=e})}function We(){return(new Date).toISOString().substring(0,10)}var $e,Ke=(Je.prototype.runIndexedDBEnvironmentCheck=function(){return f(this,void 0,void 0,function(){return h(this,function(e){return t()?[2,s().then(function(){return!0}).catch(function(){return!1})]:[2,!1]})})},Je.prototype.read=function(){return f(this,void 0,void 0,function(){return h(this,function(e){switch(e.label){case 0:return[4,this._canUseIndexedDBPromise];case 1:return e.sent()?[3,2]:[2,{heartbeats:[]}];case 2:return[4,function(n){return f(this,void 0,void 0,function(){var t;return h(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,Ue()];case 1:return[2,e.sent().transaction(Fe).objectStore(Fe).get(ze(n))];case 2:return(t=e.sent())instanceof _?me.warn(t.message):(t=Ae.create("idb-get",{originalErrorMessage:null==t?void 0:t.message}),me.warn(t.message)),[3,3];case 3:return[2]}})})}(this.app)];case 3:return[2,e.sent()||{heartbeats:[]}]}})})},Je.prototype.overwrite=function(n){var r;return f(this,void 0,void 0,function(){var t;return h(this,function(e){switch(e.label){case 0:return[4,this._canUseIndexedDBPromise];case 1:return e.sent()?[3,2]:[2];case 2:return[4,this.read()];case 3:return t=e.sent(),[2,He(this.app,{lastSentHeartbeatDate:null!==(r=n.lastSentHeartbeatDate)&&void 0!==r?r:t.lastSentHeartbeatDate,heartbeats:n.heartbeats})]}})})},Je.prototype.add=function(n){var r;return f(this,void 0,void 0,function(){var t;return h(this,function(e){switch(e.label){case 0:return[4,this._canUseIndexedDBPromise];case 1:return e.sent()?[3,2]:[2];case 2:return[4,this.read()];case 3:return t=e.sent(),[2,He(this.app,{lastSentHeartbeatDate:null!==(r=n.lastSentHeartbeatDate)&&void 0!==r?r:t.lastSentHeartbeatDate,heartbeats:a(a([],v(t.heartbeats),!1),v(n.heartbeats),!1)})]}})})},Je);function Je(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}function Ge(e){return o(JSON.stringify({version:2,heartbeats:e})).length}$e="",Se(new k("platform-logger",function(e){return new he(e)},"PRIVATE")),Se(new k("heartbeat",function(e){return new Ve(e)},"PRIVATE")),Me(ve,ge,$e),Me(ve,ge,"esm5"),Me("fire-js","");var Ye=Object.freeze({__proto__:null,SDK_VERSION:Ne,_DEFAULT_ENTRY_NAME:be,_addComponent:Ee,_addOrOverwriteComponent:Ie,_apps:_e,_clearComponents:function(){we.clear()},_components:we,_getProvider:Te,_registerComponent:Se,_removeServiceInstance:function(e,t,n){void 0===n&&(n=be),Te(e,t).clearInstance(n)},deleteApp:ke,getApp:function(e){var t=_e.get(e=void 0===e?be:e);if(!t&&e===be)return Pe();if(!t)throw Ae.create("no-app",{appName:e});return t},getApps:function(){return Array.from(_e.values())},initializeApp:Pe,onLog:Le,registerVersion:Me,setLogLevel:Be,FirebaseError:_}),Xe=(Object.defineProperty(Ze.prototype,"automaticDataCollectionEnabled",{get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(Ze.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(Ze.prototype,"options",{get:function(){return this._delegate.options},enumerable:!1,configurable:!0}),Ze.prototype.delete=function(){var t=this;return new Promise(function(e){t._delegate.checkDestroyed(),e()}).then(function(){return t.firebase.INTERNAL.removeApp(t.name),ke(t._delegate)})},Ze.prototype._getService=function(e,t){var n;void 0===t&&(t=be),this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})},Ze.prototype._removeServiceInstance=function(e,t){void 0===t&&(t=be),this._delegate.container.getProvider(e).clearInstance(t)},Ze.prototype._addComponent=function(e){Ee(this._delegate,e)},Ze.prototype._addOrOverwriteComponent=function(e){Ie(this._delegate,e)},Ze.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},Ze);function Ze(e,t){var n=this;this._delegate=e,this.firebase=t,Ee(e,new k("app-compat",function(){return n},"PUBLIC")),this.container=e.container}var Ce=((tt={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",tt["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",tt),Qe=new E("app-compat","Firebase",Ce);function et(i){var o={},a={__esModule:!0,initializeApp:function(e,t){void 0===t&&(t={});var n=Pe(e,t);if(T(o,n.name))return o[n.name];var r=new i(n,a);return o[n.name]=r},app:s,registerVersion:Me,setLogLevel:Be,onLog:Le,apps:null,SDK_VERSION:Ne,INTERNAL:{registerComponent:function(n){var r=n.name,t=r.replace("-compat","");{var e;Se(n)&&"PUBLIC"===n.type&&(e=function(e){if("function"!=typeof(e=void 0===e?s():e)[t])throw Qe.create("invalid-app-argument",{appName:r});return e[t]()},void 0!==n.serviceProps&&c(e,n.serviceProps),a[t]=e,i.prototype[t]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._getService.bind(this,r).apply(this,n.multipleInstances?e:[])})}return"PUBLIC"===n.type?a[t]:null},removeApp:function(e){delete o[e]},useAsService:function(e,t){return"serverAuth"!==t?t:null},modularAPIs:Ye}};function s(e){if(!T(o,e=e||be))throw Qe.create("no-app",{appName:e});return o[e]}return a.default=a,Object.defineProperty(a,"apps",{get:function(){return Object.keys(o).map(function(e){return o[e]})}}),s.App=i,a}var tt=function e(){var t=et(Xe);return t.INTERNAL=p(p({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){c(t,e)},createSubscribe:O,ErrorFactory:E,deepExtend:c}),t}(),Ce=new $("@firebase/app-compat");"object"==typeof self&&self.self===self&&void 0!==self.firebase&&(Ce.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  "),(rt=self.firebase.SDK_VERSION)&&0<=rt.indexOf("LITE")&&Ce.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    "));var nt=tt;Me("@firebase/app-compat","0.2.0-20221206221533",void 0);nt.registerVersion("firebase","9.15.0-20221206221533","app-compat");var rt="@firebase/installations",Ce="0.6.0-20221206221533",it=1e4,ot="w:".concat(Ce),at="FIS_v2",st="https://firebaseinstallations.googleapis.com/v1",ct=36e5,tt=((tt={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',tt["not-registered"]="Firebase Installation is not registered.",tt["installation-not-found"]="Firebase Installation not found.",tt["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',tt["app-offline"]="Could not process request. Application offline.",tt["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",tt),ut=new E("installations","Installations",tt);function lt(e){return e instanceof _&&e.code.includes("request-failed")}function ft(e){var t=e.projectId;return"".concat(st,"/projects/").concat(t,"/installations")}function pt(e){return{token:e.token,requestStatus:2,expiresIn:(e=e.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()}}function ht(n,r){return f(this,void 0,void 0,function(){var t;return h(this,function(e){switch(e.label){case 0:return[4,r.json()];case 1:return t=e.sent(),t=t.error,[2,ut.create("request-failed",{requestName:n,serverCode:t.code,serverMessage:t.message,serverStatus:t.status})]}})})}function dt(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function vt(e,t){var n=t.refreshToken,r=dt(e);return r.append("Authorization",(e=n,"".concat(at," ").concat(e))),r}function gt(n){return f(this,void 0,void 0,function(){var t;return h(this,function(e){switch(e.label){case 0:return[4,n()];case 1:return 500<=(t=e.sent()).status&&t.status<600?[2,n()]:[2,t]}})})}function mt(t){return new Promise(function(e){setTimeout(e,t)})}var bt=/^[cdef][\w-]{21}$/,yt="";function _t(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var t=function(e){return btoa(String.fromCharCode.apply(String,a([],v(e),!1))).replace(/\+/g,"-").replace(/\//g,"_")}(e).substr(0,22);return bt.test(t)?t:yt}catch(e){return yt}}function wt(e){return"".concat(e.appName,"!").concat(e.appId)}var Et=new Map;function It(e,t){var n=wt(e);St(n,t),function(e,t){var n=function(){!Tt&&"BroadcastChannel"in self&&((Tt=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(e){St(e.data.key,e.data.fid)});return Tt}();n&&n.postMessage({key:e,fid:t});0===Et.size&&Tt&&(Tt.close(),Tt=null)}(n,t)}function St(e,t){var n,r,i=Et.get(e);if(i)try{for(var o=d(i),a=o.next();!a.done;a=o.next())(0,a.value)(t)}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var Tt=null;var Ct="firebase-installations-store",At=null;function Ot(){return At=At||ce("firebase-installations-database",1,{upgrade:function(e,t){0===t&&e.createObjectStore(Ct)}})}function Dt(o,a){return f(this,void 0,void 0,function(){var t,n,r,i;return h(this,function(e){switch(e.label){case 0:return t=wt(o),[4,Ot()];case 1:return r=e.sent(),n=r.transaction(Ct,"readwrite"),[4,(r=n.objectStore(Ct)).get(t)];case 2:return i=e.sent(),[4,r.put(a,t)];case 3:return e.sent(),[4,n.done];case 4:return e.sent(),i&&i.fid===a.fid||It(o,a.fid),[2,a]}})})}function Nt(r){return f(this,void 0,void 0,function(){var t,n;return h(this,function(e){switch(e.label){case 0:return t=wt(r),[4,Ot()];case 1:return n=e.sent(),[4,(n=n.transaction(Ct,"readwrite")).objectStore(Ct).delete(t)];case 2:return e.sent(),[4,n.done];case 3:return e.sent(),[2]}})})}function Pt(a,s){return f(this,void 0,void 0,function(){var t,n,r,i,o;return h(this,function(e){switch(e.label){case 0:return t=wt(a),[4,Ot()];case 1:return r=e.sent(),n=r.transaction(Ct,"readwrite"),[4,(r=n.objectStore(Ct)).get(t)];case 2:return i=e.sent(),void 0!==(o=s(i))?[3,4]:[4,r.delete(t)];case 3:return e.sent(),[3,6];case 4:return[4,r.put(o,t)];case 5:e.sent(),e.label=6;case 6:return[4,n.done];case 7:return e.sent(),!o||i&&i.fid===o.fid||It(a,o.fid),[2,o]}})})}function kt(i){return f(this,void 0,void 0,function(){var n,t,r;return h(this,function(e){switch(e.label){case 0:return[4,Pt(i.appConfig,function(e){var t=Lt(e||{fid:_t(),registrationStatus:0}),t=function(e,t){{if(0!==t.registrationStatus)return 1===t.registrationStatus?{installationEntry:t,registrationPromise:function(i){return f(this,void 0,void 0,function(){var t,n,r;return h(this,function(e){switch(e.label){case 0:return[4,Mt(i.appConfig)];case 1:t=e.sent(),e.label=2;case 2:return 1!==t.registrationStatus?[3,5]:[4,mt(100)];case 3:return e.sent(),[4,Mt(i.appConfig)];case 4:return t=e.sent(),[3,2];case 5:return 0!==t.registrationStatus?[3,7]:[4,kt(i)];case 6:return r=e.sent(),n=r.installationEntry,(r=r.registrationPromise)?[2,r]:[2,n];case 7:return[2,t]}})})}(e)}:{installationEntry:t};if(!navigator.onLine){var n=Promise.reject(ut.create("app-offline"));return{installationEntry:t,registrationPromise:n}}var r={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},n=function(r,i){return f(this,void 0,void 0,function(){var t,n;return h(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,7]),[4,function(e,t){var s=e.appConfig,c=e.heartbeatServiceProvider,u=t.fid;return f(this,void 0,void 0,function(){var t,n,r,i,o,a;return h(this,function(e){switch(e.label){case 0:return t=ft(s),n=dt(s),(r=c.getImmediate({optional:!0}))?[4,r.getHeartbeatsHeader()]:[3,2];case 1:(r=e.sent())&&n.append("x-firebase-client",r),e.label=2;case 2:return a={fid:u,authVersion:at,appId:s.appId,sdkVersion:ot},i={method:"POST",headers:n,body:JSON.stringify(a)},[4,gt(function(){return fetch(t,i)})];case 3:return(o=e.sent()).ok?[4,o.json()]:[3,5];case 4:return a=e.sent(),[2,{fid:a.fid||u,registrationStatus:2,refreshToken:a.refreshToken,authToken:pt(a.authToken)}];case 5:return[4,ht("Create Installation",o)];case 6:throw e.sent()}})})}(r,i)];case 1:return t=e.sent(),[2,Dt(r.appConfig,t)];case 2:return lt(n=e.sent())&&409===n.customData.serverCode?[4,Nt(r.appConfig)]:[3,4];case 3:return e.sent(),[3,6];case 4:return[4,Dt(r.appConfig,{fid:i.fid,registrationStatus:0})];case 5:e.sent(),e.label=6;case 6:throw n;case 7:return[2]}})})}(e,r);return{installationEntry:r,registrationPromise:n}}}(i,t);return n=t.registrationPromise,t.installationEntry})];case 1:return(t=e.sent()).fid!==yt?[3,3]:(r={},[4,n]);case 2:return[2,(r.installationEntry=e.sent(),r)];case 3:return[2,{installationEntry:t,registrationPromise:n}]}})})}function Mt(e){return Pt(e,function(e){if(!e)throw ut.create("installation-not-found");return Lt(e)})}function Lt(e){return 1===(t=e).registrationStatus&&t.registrationTime+it<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}function Bt(e,c){var u=e.appConfig,l=e.heartbeatServiceProvider;return f(this,void 0,void 0,function(){var n,r,i,o,a,s;return h(this,function(e){switch(e.label){case 0:return t=c.fid,n="".concat(ft(u),"/").concat(t,"/authTokens:generate"),r=vt(u,c),(i=l.getImmediate({optional:!0}))?[4,i.getHeartbeatsHeader()]:[3,2];case 1:(i=e.sent())&&r.append("x-firebase-client",i),e.label=2;case 2:return s={installation:{sdkVersion:ot,appId:u.appId}},o={method:"POST",headers:r,body:JSON.stringify(s)},[4,gt(function(){return fetch(n,o)})];case 3:return(a=e.sent()).ok?[4,a.json()]:[3,5];case 4:return s=e.sent(),[2,pt(s)];case 5:return[4,ht("Generate Auth Token",a)];case 6:throw e.sent()}var t})})}function Rt(i,o){return void 0===o&&(o=!1),f(this,void 0,void 0,function(){var r,t,n;return h(this,function(e){switch(e.label){case 0:return[4,Pt(i.appConfig,function(e){if(!Ft(e))throw ut.create("not-registered");var t,n=e.authToken;if(o||2!==(t=n).requestStatus||function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+ct}(t)){if(1===n.requestStatus)return r=function(r,i){return f(this,void 0,void 0,function(){var t,n;return h(this,function(e){switch(e.label){case 0:return[4,jt(r.appConfig)];case 1:t=e.sent(),e.label=2;case 2:return 1!==t.authToken.requestStatus?[3,5]:[4,mt(100)];case 3:return e.sent(),[4,jt(r.appConfig)];case 4:return t=e.sent(),[3,2];case 5:return 0===(n=t.authToken).requestStatus?[2,Rt(r,i)]:[2,n]}})})}(i,o),e;if(!navigator.onLine)throw ut.create("app-offline");n=(t=e,n={requestStatus:1,requestTime:Date.now()},p(p({},t),{authToken:n}));return r=function(i,o){return f(this,void 0,void 0,function(){var t,n,r;return h(this,function(e){switch(e.label){case 0:return e.trys.push([0,3,,8]),[4,Bt(i,o)];case 1:return t=e.sent(),r=p(p({},o),{authToken:t}),[4,Dt(i.appConfig,r)];case 2:return e.sent(),[2,t];case 3:return!lt(n=e.sent())||401!==n.customData.serverCode&&404!==n.customData.serverCode?[3,5]:[4,Nt(i.appConfig)];case 4:return e.sent(),[3,7];case 5:return r=p(p({},o),{authToken:{requestStatus:0}}),[4,Dt(i.appConfig,r)];case 6:e.sent(),e.label=7;case 7:throw n;case 8:return[2]}})})}(i,n),n}return e})];case 1:return t=e.sent(),r?[4,r]:[3,3];case 2:return n=e.sent(),[3,4];case 3:n=t.authToken,e.label=4;case 4:return[2,n]}})})}function jt(e){return Pt(e,function(e){if(!Ft(e))throw ut.create("not-registered");var t,n=e.authToken;return 1===(t=n).requestStatus&&t.requestTime+it<Date.now()?p(p({},e),{authToken:{requestStatus:0}}):e})}function Ft(e){return void 0!==e&&2===e.registrationStatus}function xt(n,r){return void 0===r&&(r=!1),f(this,void 0,void 0,function(){var t;return h(this,function(e){switch(e.label){case 0:return[4,function(n){return f(this,void 0,void 0,function(){var t;return h(this,function(e){switch(e.label){case 0:return[4,kt(n)];case 1:return(t=e.sent().registrationPromise)?[4,t]:[3,3];case 2:e.sent(),e.label=3;case 3:return[2]}})})}(t=n)];case 1:return e.sent(),[4,Rt(t,r)];case 2:return[2,e.sent().token]}})})}function Ut(e){return ut.create("missing-app-config-values",{valueName:e})}function Ht(e){var t=Te(e.getProvider("app").getImmediate(),zt).getImmediate();return{getId:function(){return function(i){return f(this,void 0,void 0,function(){var t,n,r;return h(this,function(e){switch(e.label){case 0:return[4,kt(t=i)];case 1:return n=e.sent(),r=n.installationEntry,(n.registrationPromise||Rt(t)).catch(console.error),[2,r.fid]}})})}(t)},getToken:function(e){return xt(t,e)}}}var zt="installations";Se(new k(zt,function(e){var t=e.getProvider("app").getImmediate();return{app:t,appConfig:function(e){var t,n;if(!e||!e.options)throw Ut("App Configuration");if(!e.name)throw Ut("App Name");try{for(var r=d(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!e.options[o])throw Ut(o)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t),heartbeatServiceProvider:Te(t,"heartbeat"),_delete:function(){return Promise.resolve()}}},"PUBLIC")),Se(new k("installations-internal",Ht,"PRIVATE")),Me(rt,Ce),Me(rt,Ce,"esm5");var Vt,qt,Wt="@firebase/performance",$t="0.6.0-20221206221533",Kt=$t,Jt="FB-PERF-TRACE-MEASURE",Gt="@firebase/performance/config",Yt="@firebase/performance/configexpire",rt="Performance",Ce=((Ce={})["trace started"]="Trace {$traceName} was started before.",Ce["trace stopped"]="Trace {$traceName} is not running.",Ce["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",Ce["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",Ce["no window"]="Window is not available.",Ce["no app id"]="App id is not available.",Ce["no project id"]="Project id is not available.",Ce["no api key"]="Api key is not available.",Ce["invalid cc log"]="Attempted to queue invalid cc event",Ce["FB not default"]="Performance can only start when Firebase app instance is the default one.",Ce["RC response not ok"]="RC response is not ok",Ce["invalid attribute name"]="Attribute name {$attributeName} is invalid.",Ce["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",Ce["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",Ce["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",Ce["already initialized"]="initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance.",Ce),Xt=new E("performance",rt,Ce),Zt=new $(rt);Zt.logLevel=x.INFO;var Qt,en,tn=(nn.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},nn.prototype.mark=function(e){this.performance&&this.performance.mark&&this.performance.mark(e)},nn.prototype.measure=function(e,t,n){this.performance&&this.performance.measure&&this.performance.measure(e,t,n)},nn.prototype.getEntriesByType=function(e){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(e):[]},nn.prototype.getEntriesByName=function(e){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(e):[]},nn.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},nn.prototype.requiredApisAvailable=function(){return fetch&&Promise&&"undefined"!=typeof navigator&&navigator.cookieEnabled?!!t()||(Zt.info("IndexedDB is not supported by current browswer"),!1):(Zt.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},nn.prototype.setupObserver=function(e,i){this.PerformanceObserver&&new this.PerformanceObserver(function(e){for(var t=0,n=e.getEntries();t<n.length;t++){var r=n[t];i(r)}}).observe({entryTypes:[e]})},nn.getInstance=function(){return Vt=void 0===Vt?new nn(qt):Vt},nn);function nn(e){if(!(this.window=e))throw Xt.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}function rn(e,t){var n=e.length-t.length;if(n<0||1<n)throw Xt.create("invalid String merger input");for(var r=[],i=0;i<e.length;i++)r.push(e.charAt(i)),t.length>i&&r.push(t.charAt(i));return r.join("")}var on,an,sn=(cn.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},cn.getInstance=function(){return en=void 0===en?new cn:en},cn);function cn(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=rn("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=rn("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}(an=on=on||{})[an.UNKNOWN=0]="UNKNOWN",an[an.VISIBLE=1]="VISIBLE",an[an.HIDDEN=2]="HIDDEN";var un=["firebase_","google_","ga_"],ln=new RegExp("^[a-zA-Z]\\w*$");function fn(){switch(tn.getInstance().document.visibilityState){case"visible":return on.VISIBLE;case"hidden":return on.HIDDEN;default:return on.UNKNOWN}}function pn(e){var t=null===(t=e.options)||void 0===t?void 0:t.appId;if(!t)throw Xt.create("no app id");return t}var hn="0.0.1",dn={loggingEnabled:!0},vn="FIREBASE_INSTALLATIONS_AUTH";function gn(e,t){var r,i,n=function(){var e=tn.getInstance().localStorage;if(e){var t=e.getItem(Yt);if(t&&function(e){return Number(e)>Date.now()}(t)){e=e.getItem(Gt);if(e)try{return JSON.parse(e)}catch(e){return}}}}();return n?(bn(n),Promise.resolve()):(i=t,function(e){var t=e.getToken();return t.then(function(e){}),t}((r=e).installations).then(function(e){var t=function(e){var t=null===(t=e.options)||void 0===t?void 0:t.projectId;if(!t)throw Xt.create("no project id");return t}(r.app),n=function(e){var t=null===(t=e.options)||void 0===t?void 0:t.apiKey;if(!t)throw Xt.create("no api key");return t}(r.app),n="https://firebaseremoteconfig.googleapis.com/v1/projects/".concat(t,"/namespaces/fireperf:fetch?key=").concat(n),n=new Request(n,{method:"POST",headers:{Authorization:"".concat(vn," ").concat(e)},body:JSON.stringify({app_instance_id:i,app_instance_id_token:e,app_id:pn(r.app),app_version:Kt,sdk_version:hn})});return fetch(n).then(function(e){if(e.ok)return e.json();throw Xt.create("RC response not ok")})}).catch(function(){Zt.info(mn)}).then(bn).then(function(e){var t;e=e,t=tn.getInstance().localStorage,e&&t&&(t.setItem(Gt,JSON.stringify(e)),t.setItem(Yt,String(Date.now()+60*sn.getInstance().configTimeToLive*60*1e3)))},function(){}))}var mn="Could not fetch config, will use default configs";function bn(e){if(!e)return e;var t=sn.getInstance(),n=e.entries||{};return void 0!==n.fpr_enabled?t.loggingEnabled="true"===String(n.fpr_enabled):t.loggingEnabled=dn.loggingEnabled,n.fpr_log_source?t.logSource=Number(n.fpr_log_source):dn.logSource&&(t.logSource=dn.logSource),n.fpr_log_endpoint_url?t.logEndPointUrl=n.fpr_log_endpoint_url:dn.logEndPointUrl&&(t.logEndPointUrl=dn.logEndPointUrl),n.fpr_log_transport_key?t.transportKey=n.fpr_log_transport_key:dn.transportKey&&(t.transportKey=dn.transportKey),void 0!==n.fpr_vc_network_request_sampling_rate?t.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate):void 0!==dn.networkRequestsSamplingRate&&(t.networkRequestsSamplingRate=dn.networkRequestsSamplingRate),void 0!==n.fpr_vc_trace_sampling_rate?t.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate):void 0!==dn.tracesSamplingRate&&(t.tracesSamplingRate=dn.tracesSamplingRate),t.logTraceAfterSampling=yn(t.tracesSamplingRate),t.logNetworkAfterSampling=yn(t.networkRequestsSamplingRate),e}function yn(e){return Math.random()<=e}var _n,wn=1;function En(e){var n;return wn=2,_n=_n||(n=e,function(){var n=tn.getInstance().document;return new Promise(function(e){var t;n&&"complete"!==n.readyState?(t=function(){"complete"===n.readyState&&(n.removeEventListener("readystatechange",t),e())},n.addEventListener("readystatechange",t)):e()})}().then(function(){return e=n.installations,(t=e.getId()).then(function(e){Qt=e}),t;var e,t}).then(function(e){return gn(n,e)}).then(In,In))}function In(){wn=3}var Sn,Tn=1e4,Cn=3,An=1e3,On=Cn,Dn=[],Nn=!1;function Pn(e){setTimeout(function(){var e,t;if(0!==On)return Dn.length?(e=Dn.splice(0,An),t=e.map(function(e){return{source_extension_json_proto3:e.message,event_time_ms:String(e.eventTime)}}),void function(e,r){return function(e){var t=sn.getInstance().getFlTransportFullUrl();return fetch(t,{method:"POST",body:JSON.stringify(e)})}(e).then(function(e){return e.ok||Zt.info("Call to Firebase backend failed."),e.json()}).then(function(e){var t=Number(e.nextRequestWaitMillis),n=Tn;isNaN(t)||(n=Math.max(t,n));t=e.logResponseDetails;Array.isArray(t)&&0<t.length&&"RETRY_REQUEST_LATER"===t[0].responseAction&&(Dn=a(a([],r,!0),Dn,!0),Zt.info("Retry transport request later.")),On=Cn,Pn(n)})}({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:sn.getInstance().logSource,log_event:t},e).catch(function(){Dn=a(a([],e,!0),Dn,!0),On--,Zt.info("Tries left: ".concat(On,".")),Pn(Tn)})):Pn(Tn)},e)}function kn(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];!function(e){if(!e.eventTime||!e.message)throw Xt.create("invalid cc log");Dn=a(a([],Dn,!0),[e],!1)}({message:n.apply(void 0,e),eventTime:Date.now()})}}function Mn(e,t){(Sn=Sn||kn(Rn))(e,t)}function Ln(e){var t=sn.getInstance();!t.instrumentationEnabled&&e.isAuto||(t.dataCollectionEnabled||e.isAuto)&&tn.getInstance().requiredApisAvailable()&&(e.isAuto&&fn()!==on.VISIBLE||(3===wn?Bn(e):En(e.performanceController).then(function(){return Bn(e)},function(){return Bn(e)})))}function Bn(e){var t;!Qt||(t=sn.getInstance()).loggingEnabled&&t.logTraceAfterSampling&&setTimeout(function(){return Mn(e,1)},0)}function Rn(e,t){return 0===t?(n={url:e.url,http_method:e.httpMethod||0,http_response_code:200,response_payload_bytes:e.responsePayloadBytes,client_start_time_us:e.startTimeUs,time_to_response_initiated_us:e.timeToResponseInitiatedUs,time_to_response_completed_us:e.timeToResponseCompletedUs},n={application_info:jn(e.performanceController.app),network_request_metric:n},JSON.stringify(n)):function(e){var t={name:e.name,is_auto:e.isAuto,client_start_time_us:e.startTimeUs,duration_us:e.durationUs};0!==Object.keys(e.counters).length&&(t.counters=e.counters);var n=e.getAttributes();0!==Object.keys(n).length&&(t.custom_attributes=n);t={application_info:jn(e.performanceController.app),trace_metric:t};return JSON.stringify(t)}(e);var n}function jn(e){return{google_app_id:pn(e),app_instance_id:Qt,web_app_info:{sdk_version:Kt,page_url:tn.getInstance().getUrl(),service_worker_status:null!=(t=tn.getInstance().navigator)&&t.serviceWorker?t.serviceWorker.controller?2:3:1,visibility_state:fn(),effective_connection_type:function(){var e=tn.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}()},application_process_state:0};var t}var Fn=["_fp","_fcp","_fid"];var xn=(Un.prototype.start=function(){if(1!==this.state)throw Xt.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},Un.prototype.stop=function(){if(2!==this.state)throw Xt.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Ln(this)},Un.prototype.record=function(e,t,n){if(e<=0)throw Xt.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw Xt.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*t),this.startTimeUs=Math.floor(1e3*e),n&&n.attributes&&(this.customAttributes=p({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Math.floor(Number(n.metrics[o])))}Ln(this)},Un.prototype.incrementMetric=function(e,t){void 0===t&&(t=1),void 0===this.counters[e]?this.putMetric(e,t):this.putMetric(e,this.counters[e]+t)},Un.prototype.putMetric=function(e,t){if(r=e,i=this.name,0===r.length||100<r.length||!(i&&i.startsWith("_wt_")&&-1<Fn.indexOf(r))&&r.startsWith("_"))throw Xt.create("invalid custom metric name",{customMetricName:e});var n,r,i;this.counters[e]=(t=null!=t?t:0,(n=Math.floor(t))<t&&Zt.info("Metric value should be an Integer, setting the value as : ".concat(n,".")),n)},Un.prototype.getMetric=function(e){return this.counters[e]||0},Un.prototype.putAttribute=function(e,t){var n,r,i=!(0===(n=e).length||40<n.length)&&(!un.some(function(e){return n.startsWith(e)})&&!!n.match(ln)),o=0!==(r=t).length&&r.length<=100;if(i&&o)this.customAttributes[e]=t;else{if(!i)throw Xt.create("invalid attribute name",{attributeName:e});if(!o)throw Xt.create("invalid attribute value",{attributeValue:t})}},Un.prototype.getAttribute=function(e){return this.customAttributes[e]},Un.prototype.removeAttribute=function(e){void 0!==this.customAttributes[e]&&delete this.customAttributes[e]},Un.prototype.getAttributes=function(){return p({},this.customAttributes)},Un.prototype.setStartTime=function(e){this.startTimeUs=e},Un.prototype.setDuration=function(e){this.durationUs=e},Un.prototype.calculateTraceMetrics=function(){var e=this.api.getEntriesByName(this.traceMeasure),e=e&&e[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},Un.createOobTrace=function(e,t,n,r){var i,o=tn.getInstance().getUrl();o&&(i=new Un(e,"_wt_"+o,!0),o=Math.floor(1e3*tn.getInstance().getTimeOrigin()),i.setStartTime(o),t&&t[0]&&(i.setDuration(Math.floor(1e3*t[0].duration)),i.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),i.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),i.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),n&&((o=n.find(function(e){return"first-paint"===e.name}))&&o.startTime&&i.putMetric("_fp",Math.floor(1e3*o.startTime)),(o=n.find(function(e){return"first-contentful-paint"===e.name}))&&o.startTime&&i.putMetric("_fcp",Math.floor(1e3*o.startTime)),r&&i.putMetric("_fid",Math.floor(1e3*r))),Ln(i))},Un.createUserTimingTrace=function(e,t){Ln(new Un(e,t,!1,t))},Un);function Un(e,t,n,r){void 0===n&&(n=!1),this.performanceController=e,this.name=t,this.isAuto=n,this.state=1,this.customAttributes={},this.counters={},this.api=tn.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="".concat("FB-PERF-TRACE-START","-").concat(this.randomId,"-").concat(this.name),this.traceStopMark="".concat("FB-PERF-TRACE-STOP","-").concat(this.randomId,"-").concat(this.name),this.traceMeasure=r||"".concat(Jt,"-").concat(this.randomId,"-").concat(this.name),r&&this.calculateTraceMetrics())}function Hn(e,t){var n,r,i,o,a=t;a&&void 0!==a.responseStart&&(i=tn.getInstance().getTimeOrigin(),o=Math.floor(1e3*(a.startTime+i)),r=a.responseStart?Math.floor(1e3*(a.responseStart-a.startTime)):void 0,i=Math.floor(1e3*(a.responseEnd-a.startTime)),a={performanceController:e,url:a.name&&a.name.split("?")[0],responsePayloadBytes:a.transferSize,startTimeUs:o,timeToResponseInitiatedUs:r,timeToResponseCompletedUs:i},n=a,(o=sn.getInstance()).instrumentationEnabled&&(r=n.url,i=o.logEndPointUrl.split("?")[0],a=o.flTransportEndpointUrl.split("?")[0],r!==i&&r!==a&&o.loggingEnabled&&o.logNetworkAfterSampling&&setTimeout(function(){return Mn(n,0)},0)))}var zn=5e3;function Vn(e){Qt&&(setTimeout(function(){return function(t){var e=tn.getInstance(),n=e.getEntriesByType("navigation"),r=e.getEntriesByType("paint");{var i;e.onFirstInputDelay?(i=setTimeout(function(){xn.createOobTrace(t,n,r),i=void 0},zn),e.onFirstInputDelay(function(e){i&&(clearTimeout(i),xn.createOobTrace(t,n,r,e))})):xn.createOobTrace(t,n,r)}}(e)},0),setTimeout(function(){return function(t){for(var e=tn.getInstance(),n=e.getEntriesByType("resource"),r=0,i=n;r<i.length;r++){var o=i[r];Hn(t,o)}e.setupObserver("resource",function(e){return Hn(t,e)})}(e)},0),setTimeout(function(){return function(t){for(var e=tn.getInstance(),n=e.getEntriesByType("measure"),r=0,i=n;r<i.length;r++){var o=i[r];qn(t,o)}e.setupObserver("measure",function(e){return qn(t,e)})}(e)},0))}function qn(e,t){var n=t.name;n.substring(0,Jt.length)!==Jt&&xn.createUserTimingTrace(e,n)}var Wn=($n.prototype._init=function(e){var t=this;this.initialized||(void 0!==(null==e?void 0:e.dataCollectionEnabled)&&(this.dataCollectionEnabled=e.dataCollectionEnabled),void 0!==(null==e?void 0:e.instrumentationEnabled)&&(this.instrumentationEnabled=e.instrumentationEnabled),tn.getInstance().requiredApisAvailable()?s().then(function(e){e&&(Nn||(Pn(5500),Nn=!0),En(t).then(function(){return Vn(t)},function(){return Vn(t)}),t.initialized=!0)}).catch(function(e){Zt.info("Environment doesn't support IndexedDB: ".concat(e))}):Zt.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))},Object.defineProperty($n.prototype,"instrumentationEnabled",{get:function(){return sn.getInstance().instrumentationEnabled},set:function(e){sn.getInstance().instrumentationEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty($n.prototype,"dataCollectionEnabled",{get:function(){return sn.getInstance().dataCollectionEnabled},set:function(e){sn.getInstance().dataCollectionEnabled=e},enumerable:!1,configurable:!0}),$n);function $n(e,t){this.app=e,this.installations=t,this.initialized=!1}var Kn="[DEFAULT]";Se(new k("performance",function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(r.name!==Kn)throw Xt.create("FB not default");if("undefined"==typeof window)throw Xt.create("no window");qt=window;i=new Wn(r,i);return i._init(n),i},"PUBLIC")),Me(Wt,$t),Me(Wt,$t,"esm5");var Jn=(Object.defineProperty(Gn.prototype,"instrumentationEnabled",{get:function(){return this._delegate.instrumentationEnabled},set:function(e){this._delegate.instrumentationEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(Gn.prototype,"dataCollectionEnabled",{get:function(){return this._delegate.dataCollectionEnabled},set:function(e){this._delegate.dataCollectionEnabled=e},enumerable:!1,configurable:!0}),Gn.prototype.trace=function(e){return t=this._delegate,t=(n=t)&&n._delegate?n._delegate:n,new xn(t,e);var t,n},Gn);function Gn(e,t){this.app=e,this._delegate=t}var Yn;function Xn(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("performance").getImmediate();return new Jn(t,n)}(Yn=nt).INTERNAL.registerComponent(new k("performance-compat",Xn,"PUBLIC")),Yn.registerVersion("@firebase/performance-compat","0.2.0-20221206221533");return nt.registerVersion("firebase","9.15.0-20221206221533","compat-lite"),nt});
//# sourceMappingURL=firebase-performance-standalone-compat.js.map
