import{registerVersion as t,_registerComponent as e,_getProvider as n,getApp as s,SDK_VERSION as r}from"./firebase-app.js";function a(){try{return"object"==typeof indexedDB}catch(t){return!1}}class i extends Error{constructor(t,e,a){super(e),this.code=t,this.customData=a,this.name="FirebaseError",Object.setPrototypeOf(this,i.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,o.prototype.create)}}class o{constructor(t,e,a){this.service=t,this.serviceName=e,this.errors=a}create(t,...e){var r,e=e[0]||{},a=this.service+"/"+t,t=this.errors[t],t=t?(r=e,t.replace(c,(t,e)=>{var a=r[e];return null!=a?String(a):`<${e}?>`})):"Error",t=this.serviceName+`: ${t} (${a}).`;return new i(a,t,e)}}const c=/\{\$([^}]+)}/g;function u(t,e=1e3,a=2){e*=Math.pow(a,t),a=Math.round(.5*e*(Math.random()-.5)*2);return Math.min(144e5,e+a)}function l(t){return t&&t._delegate?t._delegate:t}class g{constructor(t,e,a){this.name=t,this.instanceFactory=e,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}var h;!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(h=h||{});const f={debug:h.DEBUG,verbose:h.VERBOSE,info:h.INFO,warn:h.WARN,error:h.ERROR,silent:h.SILENT},d=h.INFO,p={[h.DEBUG]:"log",[h.VERBOSE]:"log",[h.INFO]:"info",[h.WARN]:"warn",[h.ERROR]:"error"},m=(t,e,...a)=>{if(!(e<t.logLevel)){var r=(new Date).toISOString(),s=p[e];if(!s)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[s](`[${r}]  ${t.name}:`,...a)}};class w{constructor(t){this.name=t,this._logLevel=d,this._logHandler=m,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in h))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?f[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,h.DEBUG,...t),this._logHandler(this,h.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,h.VERBOSE,...t),this._logHandler(this,h.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,h.INFO,...t),this._logHandler(this,h.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,h.WARN,...t),this._logHandler(this,h.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,h.ERROR,...t),this._logHandler(this,h.ERROR,...t)}}let v,_;const y=new WeakMap,b=new WeakMap,E=new WeakMap,S=new WeakMap,I=new WeakMap;let C={get(t,e,a){if(t instanceof IDBTransaction){if("done"===e)return b.get(t);if("objectStoreNames"===e)return t.objectStoreNames||E.get(t);if("store"===e)return a.objectStoreNames[1]?void 0:a.objectStore(a.objectStoreNames[0])}return M(t[e])},set:(t,e,a)=>(t[e]=a,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function T(a){return a!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(_=_||[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey]).includes(a)?function(...t){return a.apply(D(this),t),M(y.get(this))}:function(...t){return M(a.apply(D(this),t))}:function(t,...e){e=a.call(D(this),t,...e);return E.set(e,t.sort?t.sort():[t]),M(e)}}function L(t){return"function"==typeof t?T(t):(t instanceof IDBTransaction&&(i=t,b.has(i)||(e=new Promise((t,e)=>{const a=()=>{i.removeEventListener("complete",r),i.removeEventListener("error",s),i.removeEventListener("abort",s)},r=()=>{t(),a()},s=()=>{e(i.error||new DOMException("AbortError","AbortError")),a()};i.addEventListener("complete",r),i.addEventListener("error",s),i.addEventListener("abort",s)}),b.set(i,e))),a=t,(v=v||[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]).some(t=>a instanceof t)?new Proxy(t,C):t);var i,e,a}function M(t){if(t instanceof IDBRequest){var i=t;const a=new Promise((t,e)=>{const a=()=>{i.removeEventListener("success",r),i.removeEventListener("error",s)},r=()=>{t(M(i.result)),a()},s=()=>{e(i.error),a()};i.addEventListener("success",r),i.addEventListener("error",s)});return a.then(t=>{t instanceof IDBCursor&&y.set(t,i)}).catch(()=>{}),I.set(a,i),a}if(S.has(t))return S.get(t);var e=L(t);return e!==t&&(S.set(t,e),I.set(e,t)),e}const D=t=>I.get(t),k=["get","getKey","getAll","getAllKeys","count"],F=["put","add","delete","clear"],P=new Map;function O(t,e){if(t instanceof IDBDatabase&&!(e in t)&&"string"==typeof e){if(P.get(e))return P.get(e);const r=e.replace(/FromIndex$/,""),s=e!==r,i=F.includes(r);return r in(s?IDBIndex:IDBObjectStore).prototype&&(i||k.includes(r))?(t=async function(t,...e){t=this.transaction(t,i?"readwrite":"readonly");let a=t.store;return s&&(a=a.index(e.shift())),(await Promise.all([a[r](...e),i&&t.done]))[0]},P.set(e,t),t):void 0}}C=(r=>({...r,get:(t,e,a)=>O(t,e)||r.get(t,e,a),has:(t,e)=>!!O(t,e)||r.has(t,e)}))(C);const N="@firebase/installations",j=new o("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function R(t){return t instanceof i&&t.code.includes("request-failed")}function A({projectId:t}){return`https://firebaseinstallations.googleapis.com/v1/projects/${t}/installations`}function B(t){return{token:t.token,requestStatus:2,expiresIn:(t=t.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()}}async function $(t,e){e=(await e.json()).error;return j.create("request-failed",{requestName:t,serverCode:e.code,serverMessage:e.message,serverStatus:e.status})}function H({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function x(t,{refreshToken:e}){const a=H(t);return a.append("Authorization","FIS_v2 "+e),a}async function q(t){var e=await t();return 500<=e.status&&e.status<600?t():e}function K(e){return new Promise(t=>{setTimeout(t,e)})}const U=/^[cdef][\w-]{21}$/;function V(){try{const a=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(a),a[0]=112+a[0]%16;e=a;var t=btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_").substr(0,22);return U.test(t)?t:""}catch(t){return""}var e}function z(t){return t.appName+"!"+t.appId}const G=new Map;function W(t,e){t=z(t);J(t,e);{!Y&&"BroadcastChannel"in self&&((Y=new BroadcastChannel("[Firebase] FID Change")).onmessage=t=>{J(t.data.key,t.data.fid)});const a=Y;return a&&a.postMessage({key:t,fid:e}),void(0===G.size&&Y&&(Y.close(),Y=null))}}function J(t,e){var a=G.get(t);if(a)for(const t of a)t(e)}let Y=null;const Z="firebase-installations-store";let Q=null;function X(){return Q=Q||function({blocked:t,upgrade:e,blocking:a,terminated:r}){const s=indexedDB.open("firebase-installations-database",1),i=M(s);return e&&s.addEventListener("upgradeneeded",t=>{e(M(s.result),t.oldVersion,t.newVersion,M(s.transaction))}),t&&s.addEventListener("blocked",()=>t()),i.then(t=>{r&&t.addEventListener("close",()=>r()),a&&t.addEventListener("versionchange",()=>a())}).catch(()=>{}),i}({upgrade:(t,e)=>{0===e&&t.createObjectStore(Z)}})}async function tt(t,e){const a=z(t),r=(await X()).transaction(Z,"readwrite"),s=r.objectStore(Z),i=await s.get(a);return await s.put(e,a),await r.done,i&&i.fid===e.fid||W(t,e.fid),e}async function et(t){const e=z(t),a=(await X()).transaction(Z,"readwrite");await a.objectStore(Z).delete(e),await a.done}async function nt(t,e){const a=z(t),r=(await X()).transaction(Z,"readwrite"),s=r.objectStore(Z),i=await s.get(a),n=e(i);return void 0===n?await s.delete(a):await s.put(n,a),await r.done,!n||i&&i.fid===n.fid||W(t,n.fid),n}async function st(e){let a;var t=await nt(e.appConfig,t=>{t=it(t||{fid:V(),registrationStatus:0}),t=function(t,e){if(0!==e.registrationStatus)return 1===e.registrationStatus?{installationEntry:e,registrationPromise:rt(t)}:{installationEntry:e};if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(j.create("app-offline"))};e={fid:e.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:e,registrationPromise:async function(e,a){try{var t=await async function({appConfig:t,heartbeatServiceProvider:e},{fid:a}){const r=A(t),s=H(t),i=e.getImmediate({optional:!0});if(i){const t=await i.getHeartbeatsHeader();t&&s.append("x-firebase-client",t)}const n={fid:a,authVersion:"FIS_v2",appId:t.appId,sdkVersion:"w:0.6.0"},o={method:"POST",headers:s,body:JSON.stringify(n)},c=await q(()=>fetch(r,o));if(c.ok){const t=await c.json();return{fid:t.fid||a,registrationStatus:2,refreshToken:t.refreshToken,authToken:B(t.authToken)}}throw await $("Create Installation",c)}(e,a);return tt(e.appConfig,t)}catch(t){throw R(t)&&409===t.customData.serverCode?await et(e.appConfig):await tt(e.appConfig,{fid:a.fid,registrationStatus:0}),t}}(t,e)}}(e,t);return a=t.registrationPromise,t.installationEntry});return""===t.fid?{installationEntry:await a}:{installationEntry:t,registrationPromise:a}}async function rt(t){let e=await at(t.appConfig);for(;1===e.registrationStatus;)await K(100),e=await at(t.appConfig);if(0!==e.registrationStatus)return e;{const{installationEntry:e,registrationPromise:a}=await st(t);return a||e}}function at(t){return nt(t,t=>{if(t)return it(t);throw j.create("installation-not-found")})}function it(t){return 1===t.registrationStatus&&t.registrationTime+1e4<Date.now()?{fid:t.fid,registrationStatus:0}:t}async function ot({appConfig:t,heartbeatServiceProvider:e},a){[n,o]=[t,a["fid"]];const r=A(n)+`/${o}/authTokens:generate`,s=x(t,a),i=e.getImmediate({optional:!0});var n,o;if(i){const t=await i.getHeartbeatsHeader();t&&s.append("x-firebase-client",t)}const c={installation:{sdkVersion:"w:0.6.0",appId:t.appId}},l={method:"POST",headers:s,body:JSON.stringify(c)},u=await q(()=>fetch(r,l));if(u.ok)return B(await u.json());throw await $("Generate Auth Token",u)}async function ct(s,i=!1){let n;var t=await nt(s.appConfig,t=>{if(!lt(t))throw j.create("not-registered");var e,a,r=t.authToken;if(!(i||2!==r.requestStatus||(e=r,(a=Date.now())<e.creationTime||e.creationTime+e.expiresIn<a+36e5)))return t;if(1===r.requestStatus)return n=async function(t,e){let a=await ut(t.appConfig);for(;1===a.authToken.requestStatus;)await K(100),a=await ut(t.appConfig);var r=a.authToken;return 0===r.requestStatus?ct(t,e):r}(s,i),t;{if(!navigator.onLine)throw j.create("app-offline");e=t,a={requestStatus:1,requestTime:Date.now()};const i=Object.assign(Object.assign({},e),{authToken:a});return n=async function(e,a){try{var t=await ot(e,a),r=Object.assign(Object.assign({},a),{authToken:t});return await tt(e.appConfig,r),t}catch(t){throw!R(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode?(r=Object.assign(Object.assign({},a),{authToken:{requestStatus:0}}),await tt(e.appConfig,r)):await et(e.appConfig),t}}(s,i),i}});return n?await n:t.authToken}function ut(t){return nt(t,t=>{if(!lt(t))throw j.create("not-registered");var e=t.authToken;return 1===e.requestStatus&&e.requestTime+1e4<Date.now()?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}function lt(t){return void 0!==t&&2===t.registrationStatus}async function gt(t,e=!1){var a;return await(!(a=(await st(t)).registrationPromise)||!await a),(await ct(t,e)).token}function ht(t){return j.create("missing-app-config-values",{valueName:t})}const ft=t=>{const e=t.getProvider("app").getImmediate(),a=n(e,"installations").getImmediate();return{getId:()=>async function(t){const e=t,{installationEntry:a,registrationPromise:r}=await st(e);return(r||ct(e)).catch(console.error),a.fid}(a),getToken:t=>gt(a,t)}},dt=(e(new g("installations",t=>{t=t.getProvider("app").getImmediate();return{app:t,appConfig:function(t){if(!t||!t.options)throw ht("App Configuration");if(!t.name)throw ht("App Name");for(const e of["projectId","apiKey","appId"])if(!t.options[e])throw ht(e);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(t),heartbeatServiceProvider:n(t,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),e(new g("installations-internal",ft,"PRIVATE")),t(N,"0.6.0"),t(N,"0.6.0","esm2017"),"@firebase/remote-config");class pt{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}const mt=new o("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"}),wt=["1","true","t","yes","y","on"];class vt{constructor(t,e=""){this._source=t,this._value=e}asString(){return this._value}asBoolean(){return"static"!==this._source&&0<=wt.indexOf(this._value.toLowerCase())}asNumber(){if("static"===this._source)return 0;let t=Number(this._value);return t=isNaN(t)?0:t}getSource(){return this._source}}function _t(t=s()){return t=l(t),n(t,"remote-config").getImmediate()}async function yt(t){const e=l(t),[a,r]=await Promise.all([e._storage.getLastSuccessfulFetchResponse(),e._storage.getActiveConfigEtag()]);return!!(a&&a.config&&a.eTag&&a.eTag!==r)&&(await Promise.all([e._storageCache.setActiveConfig(a.config),e._storage.setActiveConfigEtag(a.eTag)]),!0)}function bt(t){const e=l(t);return e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0})),e._initializePromise}async function Et(t){const e=l(t),a=new pt;setTimeout(async()=>{a.abort()},e.settings.fetchTimeoutMillis);try{await e._client.fetch({cacheMaxAgeMillis:e.settings.minimumFetchIntervalMillis,signal:a}),await e._storageCache.setLastFetchStatus("success")}catch(t){const a=(r=t)instanceof i&&-1!==r.code.indexOf("fetch-throttle")?"throttle":"failure";throw await e._storageCache.setLastFetchStatus(a),t}var r}function St(a){const t=l(a);return[e={},r={}]=[t._storageCache.getActiveConfig(),t.defaultConfig],Object.keys(Object.assign(Object.assign({},e),r)).reduce((t,e)=>(t[e]=Lt(a,e),t),{});var e,r}function It(t,e){return Lt(l(t),e).asBoolean()}function Ct(t,e){return Lt(l(t),e).asNumber()}function Tt(t,e){return Lt(l(t),e).asString()}function Lt(t,e){const a=l(t);a._isInitializationComplete||a._logger.debug(`A value was requested for key "${e}" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.`);t=a._storageCache.getActiveConfig();return t&&void 0!==t[e]?new vt("remote",t[e]):a.defaultConfig&&void 0!==a.defaultConfig[e]?new vt("default",String(a.defaultConfig[e])):(a._logger.debug(`Returning static value for key "${e}". Define a default or remote value if this is unintentional.`),new vt("static"))}function Mt(t,e){const a=l(t);switch(e){case"debug":a._logger.logLevel=h.DEBUG;break;case"silent":a._logger.logLevel=h.SILENT;break;default:a._logger.logLevel=h.ERROR}}class Dt{constructor(t,e,a,r){this.client=t,this.storage=e,this.storageCache=a,this.logger=r}isCachedDataFresh(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var e=Date.now()-e,a=e<=t;return this.logger.debug(`Config fetch cache check. Cache age millis: ${e}. Cache max age millis (minimumFetchIntervalMillis setting): ${t}. Is cache hit: ${a}.`),a}async fetch(t){var[e,a]=await Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);if(a&&this.isCachedDataFresh(t.cacheMaxAgeMillis,e))return a;t.eTag=a&&a.eTag;const r=await this.client.fetch(t),s=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===r.status&&s.push(this.storage.setLastSuccessfulFetchResponse(r)),await Promise.all(s),r}}function kt(t=navigator){return t.languages&&t.languages[0]||t.language}class Ft{constructor(t,e,a,r,s,i){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=a,this.projectId=r,this.apiKey=s,this.appId=i}async fetch(a){var[t,e]=await Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]),r=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${this.projectId}/namespaces/${this.namespace}:fetch?key=`+this.apiKey,s={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":a.eTag||"*"},t={sdk_version:this.sdkVersion,app_instance_id:t,app_instance_id_token:e,app_id:this.appId,language_code:kt()},e={method:"POST",headers:s,body:JSON.stringify(t)},s=fetch(r,e),t=new Promise((t,e)=>{a.signal.addEventListener(()=>{const t=new Error("The operation was aborted.");t.name="AbortError",e(t)})});let i;try{await Promise.race([s,t]),i=await s}catch(a){let t="fetch-client-network";throw"AbortError"===(null==a?void 0:a.name)&&(t="fetch-timeout"),mt.create(t,{originalErrorMessage:null==a?void 0:a.message})}let n=i.status;r=i.headers.get("ETag")||void 0;let o,c;if(200===i.status){let t;try{t=await i.json()}catch(a){throw mt.create("fetch-client-parse",{originalErrorMessage:null==a?void 0:a.message})}o=t.entries,c=t.state}if("INSTANCE_STATE_UNSPECIFIED"===c?n=500:"NO_CHANGE"===c?n=304:"NO_TEMPLATE"!==c&&"EMPTY_CONFIG"!==c||(o={}),304!==n&&200!==n)throw mt.create("fetch-status",{httpStatus:n});return{status:n,eTag:r,config:o}}}class Pt{constructor(t,e){this.client=t,this.storage=e}async fetch(t){var e=await this.storage.getThrottleMetadata()||{backoffCount:0,throttleEndTimeMillis:Date.now()};return this.attemptFetch(t,e)}async attemptFetch(t,{throttleEndTimeMillis:e,backoffCount:a}){var s,n;s=t.signal,n=e,await new Promise((t,e)=>{const a=Math.max(n-Date.now(),0),r=setTimeout(t,a);s.addEventListener(()=>{clearTimeout(r),e(mt.create("fetch-throttle",{throttleEndTimeMillis:n}))})});try{const e=await this.client.fetch(t);return await this.storage.deleteThrottleMetadata(),e}catch(e){if(!function(t){if(t instanceof i&&t.customData)return t=Number(t.customData.httpStatus),429===t||500===t||503===t||504===t}(e))throw e;a={throttleEndTimeMillis:Date.now()+u(a),backoffCount:a+1};return await this.storage.setThrottleMetadata(a),this.attemptFetch(t,a)}}}class Ot{constructor(t,e,a,r,s){this.app=t,this._client=e,this._storageCache=a,this._storage=r,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Nt(t,e){t=t.target.error||void 0;return mt.create(e,{originalErrorMessage:t&&(null==t?void 0:t.message)})}class jt{constructor(t,e,a,r=function(){return new Promise((e,a)=>{try{const t=indexedDB.open("firebase_remote_config",1);t.onerror=t=>{a(Nt(t,"storage-open"))},t.onsuccess=t=>{e(t.target.result)},t.onupgradeneeded=t=>{const e=t.target.result;0===t.oldVersion&&e.createObjectStore("app_namespace_store",{keyPath:"compositeKey"})}}catch(e){a(mt.create("storage-open",{originalErrorMessage:null==e?void 0:e.message}))}})}()){this.appId=t,this.appName=e,this.namespace=a,this.openDbPromise=r}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(t){return this.set("last_fetch_status",t)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(t){return this.set("last_successful_fetch_timestamp_millis",t)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(t){return this.set("last_successful_fetch_response",t)}getActiveConfig(){return this.get("active_config")}setActiveConfig(t){return this.set("active_config",t)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(t){return this.set("active_config_etag",t)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(t){return this.set("throttle_metadata",t)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}async get(s){const i=await this.openDbPromise;return new Promise((e,a)=>{const t=i.transaction(["app_namespace_store"],"readonly").objectStore("app_namespace_store"),r=this.createCompositeKey(s);try{const s=t.get(r);s.onerror=t=>{a(Nt(t,"storage-get"))},s.onsuccess=t=>{t=t.target.result;e(t?t.value:void 0)}}catch(t){a(mt.create("storage-get",{originalErrorMessage:null==t?void 0:t.message}))}})}async set(s,i){const n=await this.openDbPromise;return new Promise((t,e)=>{const a=n.transaction(["app_namespace_store"],"readwrite").objectStore("app_namespace_store"),r=this.createCompositeKey(s);try{const s=a.put({compositeKey:r,value:i});s.onerror=t=>{e(Nt(t,"storage-set"))},s.onsuccess=()=>{t()}}catch(t){e(mt.create("storage-set",{originalErrorMessage:null==t?void 0:t.message}))}})}async delete(s){const i=await this.openDbPromise;return new Promise((t,e)=>{const a=i.transaction(["app_namespace_store"],"readwrite").objectStore("app_namespace_store"),r=this.createCompositeKey(s);try{const s=a.delete(r);s.onerror=t=>{e(Nt(t,"storage-delete"))},s.onsuccess=()=>{t()}}catch(t){e(mt.create("storage-delete",{originalErrorMessage:null==t?void 0:t.message}))}})}createCompositeKey(t){return[this.appId,this.appName,this.namespace,t].join()}}class Rt{constructor(t){this.storage=t}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}async loadFromStorage(){var t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),a=this.storage.getActiveConfig(),t=await t,t=(t&&(this.lastFetchStatus=t),await e),e=(t&&(this.lastSuccessfulFetchTimestampMillis=t),await a);e&&(this.activeConfig=e)}setLastFetchStatus(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)}setLastSuccessfulFetchTimestampMillis(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)}setActiveConfig(t){return this.activeConfig=t,this.storage.setActiveConfig(t)}}async function At(t){return await Et(t=l(t)),yt(t)}async function Bt(){if(!a())return!1;try{return await new Promise((e,a)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var t;a((null==(t=s.error)?void 0:t.message)||"")}}catch(e){a(e)}})}catch(t){return!1}}e(new g("remote-config",function(t,{instanceIdentifier:e}){var s=t.getProvider("app").getImmediate(),t=t.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw mt.create("registration-window");if(!a())throw mt.create("indexed-db-unavailable");var{projectId:i,apiKey:n,appId:o}=s.options;if(!i)throw mt.create("registration-project-id");if(!n)throw mt.create("registration-api-key");if(!o)throw mt.create("registration-app-id");e=e||"firebase";const c=new jt(o,s.name,e),l=new Rt(c),u=new w(dt);u.logLevel=h.ERROR;t=new Ft(t,r,e,i,n,o),e=new Pt(t,c),i=new Dt(e,c,l,u),n=new Ot(s,i,l,c,u);return bt(n),n},"PUBLIC").setMultipleInstances(!0)),t(dt,"0.4.0"),t(dt,"0.4.0","esm2017");export{yt as activate,bt as ensureInitialized,At as fetchAndActivate,Et as fetchConfig,St as getAll,It as getBoolean,Ct as getNumber,_t as getRemoteConfig,Tt as getString,Lt as getValue,Bt as isSupported,Mt as setLogLevel};